jQuery(function() {
	initCycleCarousel();
	initMobileNav();
//	initTouchNav();
	initRetinaCover();
	initDropDownClasses();
	initBackToTop();
	initAccordion();
	initAnchors();
	//initOpenClose();
	initResponsiveBlock();
	Rating.Init();
});

jQuery(window).on('load', function(){
    initOpenClose();
	initStickyScrollBlock();
});

// reset placeholder
function resetPlaceholder() {
	function clearOnFocus(formName) {
		jQuery(formName).each(function(){
			var currentForm = jQuery(this);
			var input = currentForm.find('.form-control');
			var startVal = input.attr('placeholder');
			input.on({
				focus: function() {
					input.attr('placeholder', '');
				},
				blur: function() {
					input.attr('placeholder', startVal);
				}
			})
		})
	}
	clearOnFocus('.search-form');
	clearOnFocus('.news-form');
	clearOnFocus('.email-form');
}

// active class on mobile nav
function setActiveClass() {
	var activeClass = 'inner-drop-active';
	var currentIndex = jQuery('#navigation > li.'+ activeClass).index('');
	var navList = jQuery('#navigation > li').filter('.has-drop-down');
	navList.each(function(){
		var current = jQuery(this);
		var link = current.find('>a');
		link.on('click', function(e) {
			ResponsiveHelper.addRange({
/*				'1024..': {
					on: function() {
						navList.removeClass(activeClass);
						navList.eq(currentIndex).addClass(activeClass);
					}
				},*/
				'..1023': {
					on: function() {
						e.preventDefault();
						navList.removeClass(activeClass);
						current.addClass(activeClass);
					}
				},
			})
		})
	})
}
// active inner-class on mobile na

function setActiveInnerClass() {
	var activeClass = 'inner-drop-active';
	var currentIndex = jQuery('#second-navigation > li.'+ activeClass).index('');

	var navList = jQuery('#second-navigation > li').filter('.second-has-drop-down');

	navList.each(function(){
		var current = jQuery(this);
		var link = current.find('>a');
		link.on('click', function(e) {
			ResponsiveHelper.addRange({
				'..1023': {
					on: function() {
						
						e.preventDefault();
						navList.removeClass(activeClass);
						current.addClass(activeClass);
					}
				},
			})
		})
	})
}

function initPlaceholder()
{
	resetPlaceholder();
	setActiveClass();
	setActiveInnerClass();
}
// open-close init
function initOpenClose() {
	resetPlaceholder();
	setActiveClass();
	setActiveInnerClass();
    jQuery('.open-close').each(function(key, item) {

            jQuery(item).openClose({
                activeClass: 'active',
                opener: '.opener',
                slider: '.slide',
                animSpeed: 400,
                effect: 'slide',
                onInit: function(self) {
                    if (self.slider.length === 0) {
                        self.holder.addClass('no-slide');
                    } else {
                        self.holder.removeClass('no-slide');
                    }
                }
            });
	});
    jQuery('.tag-cloud').each(function(key, item) {
        if (!jQuery(item).hasClass('active')) {
            jQuery(item).openClose({
                activeClass: 'active',
                opener: '.opener',
                slider: '.slide',
                animSpeed: 400,
                effect: 'slide',
                onInit: function (self) {
                    ResponsiveHelper.addRange({
                        '1024..': {
                            on: function () {
                                self.showSlide();
                            }
                        },
                        '..1023': {
                            on: function () {
                                self.hideSlide();
                            }
                        },
                    });
                }
            });
        }
    });
}

// accordion menu init
function initAccordion() {
	jQuery('.accordion').slideAccordion({
		opener: '.acc-opener',
		slider: '.acc-slide',
		animSpeed: 300
	});
}

// initialize smooth anchor links
function initAnchors() {
	var header = jQuery('.header-holder');
	var headerInfo = jQuery('.header-info');
	new SmoothScroll({
		anchorLinks: 'a[href^="#"]:not([href="#"])',
		extraOffset: function () {
			var height = 0;

			ResponsiveHelper.addRange({
				'..1023': {
					on: function() {
						height = headerInfo.outerHeight() + 15;
					}
				},
				'1024..': {
					on: function() {
						height = header.outerHeight() + 65;
					}
				}
			});
			return height;
		},
		wheelBehavior: 'none'
	});
}

// button back to top
function initBackToTop() {
	var isWindowsPhone = /Windows Phone/.test(navigator.userAgent);
	var scrollDuration = 1000;
	var scrollElement = jQuery('html, body');
	var animSpeed = 400;
	var doc = jQuery(document);
	var win = jQuery(window);

	jQuery('.btn-top').each(function() {
		var button = jQuery(this).hide();

		win.on('load scroll orientationchange resize', function () {
			if(win.scrollTop() + win.height() > doc.height()/2) {
				button.stop().fadeIn(animSpeed);
			} else {
				button.stop().fadeOut(animSpeed);
			}
		});

		button.on('click', function(e) {
			e.preventDefault();
			var topOffset = 0;
			
			if (isWindowsPhone) {
				window.scrollTo(window.scrollLeft, topOffset);
			} else {
				scrollElement.stop().animate({
					scrollTop: topOffset
				}, scrollDuration);
			}
		});
	});
}

// cycle scroll gallery init
function initCycleCarousel() {
	jQuery('.info-slider').scrollAbsoluteGallery({
		mask: '.mask',
		slider: '.slideset',
		slides: '.slide',
		btnPrev: '.btn-prev',
		btnNext: '.btn-next',
		generatePagination: '.pagination',
		stretchSlideToMask: true
	});
}

// mobile menu init
function initMobileNav() {
	jQuery('body').mobileNav({
		menuActiveClass: 'nav-active',
		menuOpener: '.nav-opener',
		hideOnClickOutside: true,
		menuDrop: '.nav-drop'
	});
}

// handle dropdowns on mobile devices
function initTouchNav() {

	jQuery('#navigation').each(function() {
		new TouchNav({
			navBlock: this
		});
	});
	jQuery('#second-navigation').each(function() {
		new TouchNav({
			navBlock: this
		});
	});
}

function initRetinaCover() {
	jQuery('.bg-cover').retinaCover();
}

function initDropDownClasses() {
	jQuery('#navigation li').each(function() {
		var item = jQuery(this);
		var drop = item.find('ul');
		var link = item.find('a').eq(0);
		
		if (drop.length) {
			item.addClass('has-drop-down');
			if (link.length) link.addClass('has-drop-down-a');
		}
	});
	
	jQuery('#second-navigation li').each(function() {
		var item = jQuery(this);
		var drop = item.find('ul');
		var link = item.find('a').eq(0);

		item.addClass('second-has-drop-down');
		if (link.length) link.addClass('has-drop-down-b');
	});
	
}
// add classes if item has dropdown
/*
function initDropDownClasses() {
	jQuery('#navigation li').each(function() {
		var item = jQuery(this);
		var drop = item.find('ul');
		var link = item.find('a').eq(0);
		if(drop.context.outerText=="1&1 Produkte"){
			item.context.innerHTML +='<div class="inner-drop hidden-drop"><div class="container"><ul><li class="has-drop-down"><a>Lit!</a></li><li class="has-drop-down"><a>Swag</a></li><li class="has-drop-down"><a>BLING BLING</a><li class="has-drop-down"><a>BLING BLoNG</a></li></li><li class="has-drop-down"><a>Money Money Cash Cash</a></li></ul></div></div>'

		}

		//if (drop.length) {
		item.addClass('has-drop-down');
			//if (link.length) link.addClass('has-drop-down-a');
		link.addClass('has-drop-down-a');
		

		//}
	});
}
*/

function initStickyScrollBlock() {
	var header = jQuery('.header-holder');
	var headerInfo = jQuery('.header-info');
	var altClass = 'news-form-alt';
	var timer;

	// jQuery('.news-form').each(function(){
	// 	var form = jQuery(this);
	// 	var parent = form.closest('#sidebar');

	// 	form.stickyScrollBlock({
	// 		setBoxHeight: true,
	// 		activeClass: 'fixed-position',
	// 		container: '.two-columns',
	// 		positionType: 'fixed',
	// 		extraTop: function () {
	// 			var height = 0;

	// 			ResponsiveHelper.addRange({
	// 				'..1023': {
	// 					on: function() {
	// 						height = headerInfo.outerHeight() + 15;
	// 					}
	// 				},
	// 				'1024..': {
	// 					on: function() {
	// 						height = header.outerHeight() + (form.hasClass(altClass) ? 15 : 65);
	// 					}
	// 				}
	// 			});
	// 			return height;
	// 		},
	// 		fixedOn: function() {
	// 			if (parent.length) {
	// 				parent.css({
	// 					paddingTop: form.outerHeight(true)
	// 				});
	// 			}
	// 		},
	// 		fixedOff: function() {
	// 			if(parent.length) {
	// 				parent.css({
	// 					paddingTop: ''
	// 				});
	// 			}
	// 		},
	// 		extraBottom: 100
	// 	});
	// });

	jQuery('#header').stickyScrollBlock({
		setBoxHeight: true,
		activeClass: 'fixed-position',
		positionType: 'fixed'
	});
}

// Responsive Block init
function initResponsiveBlock() {
	jQuery('.respon-block').each(function() {
		var box = jQuery(this);
		var mobileHolder = jQuery('.mobile-box');
		var desktop = jQuery('.desktop-box');

		box.responsiveBlock({
			position: {
				'..767': mobileHolder,
				'768..': desktop
			}
		});
	});
}


;(function($) {

	'use strict';

	// detect device type

	var isTouchDevice = /Windows Phone/.test(navigator.userAgent) || ('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch;



	function ScrollAbsoluteGallery(options) {

		this.options = $.extend({

			activeClass: 'active',

			mask: 'div.slides-mask',

			slider: '>ul',

			slides: '>li',

			btnPrev: '.btn-prev',

			btnNext: '.btn-next',

			pagerLinks: 'ul.pager > li',

			generatePagination: false,

			pagerList: '<ul>',

			pagerListItem: '<li><a href="#"></a></li>',

			pagerListItemText: 'a',

			galleryReadyClass: 'gallery-js-ready',

			currentNumber: 'span.current-num',

			totalNumber: 'span.total-num',

			maskAutoSize: true,

			autoRotation: false,

			pauseOnHover: false,

			stretchSlideToMask: false,

			switchTime: 3000,

			animSpeed: 500,

			handleTouch: true,

			swipeThreshold: 15,

			vertical: false

		}, options);

		this.init();

	}

	ScrollAbsoluteGallery.prototype = {

		init: function() {

			if (this.options.holder) {

				this.findElements();

				this.attachEvents();

				this.makeCallback('onInit', this);

			}

		},

		findElements: function() {

			// find structure elements

			this.holder = $(this.options.holder).addClass(this.options.galleryReadyClass);

			this.mask = this.holder.find(this.options.mask);

			this.slider = this.mask.find(this.options.slider);

			this.slides = this.slider.find(this.options.slides);

			this.btnPrev = this.holder.find(this.options.btnPrev);

			this.btnNext = this.holder.find(this.options.btnNext);



			// slide count display

			this.currentNumber = this.holder.find(this.options.currentNumber);

			this.totalNumber = this.holder.find(this.options.totalNumber);



			// create gallery pagination

			if (typeof this.options.generatePagination === 'string') {

				this.pagerLinks = this.buildPagination();

			} else {

				this.pagerLinks = this.holder.find(this.options.pagerLinks);

			}



			// define index variables

			this.sizeProperty = this.options.vertical ? 'height' : 'width';

			this.positionProperty = this.options.vertical ? 'top' : 'left';

			this.animProperty = this.options.vertical ? 'marginTop' : 'marginLeft';



			this.slideSize = this.slides[this.sizeProperty]();

			this.currentIndex = 0;

			this.prevIndex = 0;



			// reposition elements

			this.options.maskAutoSize = this.options.vertical ? false : this.options.maskAutoSize;

			if (this.options.vertical) {

				this.mask.css({

					height: this.slides.innerHeight()

				});

			}

			if (this.options.maskAutoSize) {

				this.mask.css({

					height: this.slider.height()

				});

			}

			this.slider.css({

				position: 'relative',

				height: this.options.vertical ? this.slideSize * this.slides.length : '100%'

			});

			this.slides.css({

				position: 'absolute'

			}).css(this.positionProperty, -9999).eq(this.currentIndex).css(this.positionProperty, 0);

			this.refreshState();

			this.isInit = true;

		},

		buildPagination: function() {

			var pagerLinks = $();

			if (!this.pagerHolder) {

				this.pagerHolder = this.holder.find(this.options.generatePagination);

			}

			if (this.pagerHolder.length) {

				this.pagerHolder.empty();

				this.pagerList = $(this.options.pagerList).appendTo(this.pagerHolder);

				for (var i = 0; i < this.slides.length; i++) {

					$(this.options.pagerListItem).appendTo(this.pagerList).find(this.options.pagerListItemText).text(i + 1);

				}

				pagerLinks = this.pagerList.children();

			}

			return pagerLinks;

		},

		attachEvents: function() {

			// attach handlers

			var self = this;

			if (this.btnPrev.length) {

				this.btnPrevHandler = function(e) {

					e.preventDefault();

					self.prevSlide();

				};

				this.btnPrev.click(this.btnPrevHandler);

			}

			if (this.btnNext.length) {

				this.btnNextHandler = function(e) {

					e.preventDefault();

					self.nextSlide();

				};

				this.btnNext.click(this.btnNextHandler);

			}

			if (this.pagerLinks.length) {

				this.pagerLinksHandler = function(e) {

					e.preventDefault();

					self.numSlide(self.pagerLinks.index(e.currentTarget));

				};

				this.pagerLinks.click(this.pagerLinksHandler);

			}



			// handle autorotation pause on hover

			if (this.options.pauseOnHover) {

				this.hoverHandler = function() {

					clearTimeout(self.timer);

				};

				this.leaveHandler = function() {

					self.autoRotate();

				};

				this.holder.bind({

					mouseenter: this.hoverHandler,

					mouseleave: this.leaveHandler

				});

			}



			// handle holder and slides dimensions

			this.resizeHandler = function() {

				if (!self.animating && self.isInit) {

					if (self.options.stretchSlideToMask) {

						self.resizeSlides();

					}

					self.resizeHolder();

					self.setSlidesPosition(self.currentIndex);

				}

			};

			$(window).bind('load resize orientationchange', this.resizeHandler);

			if (self.options.stretchSlideToMask) {

				self.resizeSlides();

			}



			// handle swipe on mobile devices

			if (this.options.handleTouch && window.Hammer && this.mask.length && this.slides.length > 1 && isTouchDevice) {

				this.swipeHandler = new Hammer.Manager(this.mask[0]);

				this.swipeHandler.add(new Hammer.Pan({

					direction: self.options.vertical ? Hammer.DIRECTION_VERTICAL : Hammer.DIRECTION_HORIZONTAL,

					threshold: self.options.swipeThreshold

				}));



				this.swipeHandler.on('panstart', function() {

					if (self.animating) {

						self.swipeHandler.stop();

					} else {

						clearTimeout(self.timer);

					}

				}).on('panmove', function(e) {

					self.swipeOffset = -self.slideSize + e[self.options.vertical ? 'deltaY' : 'deltaX'];

					self.slider.css(self.animProperty, self.swipeOffset);

					clearTimeout(self.timer);

				}).on('panend', function(e) {

					if (e.distance > self.options.swipeThreshold) {

						if (e.offsetDirection === Hammer.DIRECTION_RIGHT || e.offsetDirection === Hammer.DIRECTION_DOWN) {

							self.prevSlide();

						} else {

							self.nextSlide();

						}

					} else {

						var tmpObj = {};

						tmpObj[self.animProperty] = -self.slideSize;

						self.slider.animate(tmpObj, {

							duration: self.options.animSpeed

						});

						self.autoRotate();

					}

					self.swipeOffset = 0;

				});

			}



			// start autorotation

			this.autoRotate();

			this.resizeHolder();

			this.setSlidesPosition(this.currentIndex);

		},

		resizeSlides: function() {

			this.slideSize = this.mask[this.options.vertical ? 'height' : 'width']();

			this.slides.css(this.sizeProperty, this.slideSize);

		},

		resizeHolder: function() {

			if (this.options.maskAutoSize) {

				this.mask.css({

					height: this.slides.eq(this.currentIndex).outerHeight(true)

				});

			}

		},

		prevSlide: function() {

			if (!this.animating && this.slides.length > 1) {

				this.direction = -1;

				this.prevIndex = this.currentIndex;

				if (this.currentIndex > 0) this.currentIndex--;

				else this.currentIndex = this.slides.length - 1;

				this.switchSlide();

			}

		},

		nextSlide: function(fromAutoRotation) {

			if (!this.animating && this.slides.length > 1) {

				this.direction = 1;

				this.prevIndex = this.currentIndex;

				if (this.currentIndex < this.slides.length - 1) this.currentIndex++;

				else this.currentIndex = 0;

				this.switchSlide();

			}

		},

		numSlide: function(c) {

			if (!this.animating && this.currentIndex !== c && this.slides.length > 1) {

				this.direction = c > this.currentIndex ? 1 : -1;

				this.prevIndex = this.currentIndex;

				this.currentIndex = c;

				this.switchSlide();

			}

		},

		preparePosition: function() {

			// prepare slides position before animation

			this.setSlidesPosition(this.prevIndex, this.direction < 0 ? this.currentIndex : null, this.direction > 0 ? this.currentIndex : null, this.direction);

		},

		setSlidesPosition: function(index, slideLeft, slideRight, direction) {

			// reposition holder and nearest slides

			if (this.slides.length > 1) {

				var prevIndex = (typeof slideLeft === 'number' ? slideLeft : index > 0 ? index - 1 : this.slides.length - 1);

				var nextIndex = (typeof slideRight === 'number' ? slideRight : index < this.slides.length - 1 ? index + 1 : 0);



				this.slider.css(this.animProperty, this.swipeOffset ? this.swipeOffset : -this.slideSize);

				this.slides.css(this.positionProperty, -9999).eq(index).css(this.positionProperty, this.slideSize);

				if (prevIndex === nextIndex && typeof direction === 'number') {

					var calcOffset = direction > 0 ? this.slideSize * 2 : 0;

					this.slides.eq(nextIndex).css(this.positionProperty, calcOffset);

				} else {

					this.slides.eq(prevIndex).css(this.positionProperty, 0);

					this.slides.eq(nextIndex).css(this.positionProperty, this.slideSize * 2);

				}

			}

		},

		switchSlide: function() {

			// prepare positions and calculate offset

			var self = this;

			var oldSlide = this.slides.eq(this.prevIndex);

			var newSlide = this.slides.eq(this.currentIndex);

			this.animating = true;



			// resize mask to fit slide

			if (this.options.maskAutoSize) {

				this.mask.animate({

					height: newSlide.outerHeight(true)

				}, {

					duration: this.options.animSpeed

				});

			}



			// start animation

			var animProps = {};

			animProps[this.animProperty] = this.direction > 0 ? -this.slideSize * 2 : 0;

			this.preparePosition();

			this.slider.animate(animProps, {

				duration: this.options.animSpeed,

				complete: function() {

					self.setSlidesPosition(self.currentIndex);



					// start autorotation

					self.animating = false;

					self.autoRotate();



					// onchange callback

					self.makeCallback('onChange', self);

				}

			});



			// refresh classes

			this.refreshState();



			// onchange callback

			this.makeCallback('onBeforeChange', this);

		},

		refreshState: function(initial) {

			// slide change function

			this.slides.removeClass(this.options.activeClass).eq(this.currentIndex).addClass(this.options.activeClass);

			this.pagerLinks.removeClass(this.options.activeClass).eq(this.currentIndex).addClass(this.options.activeClass);



			// display current slide number

			this.currentNumber.html(this.currentIndex + 1);

			this.totalNumber.html(this.slides.length);



			// add class if not enough slides

			this.holder.toggleClass('not-enough-slides', this.slides.length === 1);

		},

		autoRotate: function() {

			var self = this;

			clearTimeout(this.timer);

			if (this.options.autoRotation) {

				this.timer = setTimeout(function() {

					self.nextSlide();

				}, this.options.switchTime);

			}

		},

		makeCallback: function(name) {

			if (typeof this.options[name] === 'function') {

				var args = Array.prototype.slice.call(arguments);

				args.shift();

				this.options[name].apply(this, args);

			}

		},

		destroy: function() {

			// destroy handler

			this.isInit = false;

			this.btnPrev.unbind('click', this.btnPrevHandler);

			this.btnNext.unbind('click', this.btnNextHandler);

			this.pagerLinks.unbind('click', this.pagerLinksHandler);

			this.holder.unbind('mouseenter', this.hoverHandler);

			this.holder.unbind('mouseleave', this.leaveHandler);

			$(window).unbind('load resize orientationchange', this.resizeHandler);

			clearTimeout(this.timer);



			// destroy swipe handler

			if (this.swipeHandler) {

				this.swipeHandler.destroy();

			}



			// remove inline styles, classes and pagination

			this.holder.removeClass(this.options.galleryReadyClass).removeData('ScrollAbsoluteGallery');

			this.slider.add(this.slides).add(this.mask).removeAttr('style');

			this.slides.removeClass(this.options.activeClass);

			if (typeof this.options.generatePagination === 'string') {

				this.pagerHolder.empty();

			}

		}

	};



	// jquery plugin

	$.fn.scrollAbsoluteGallery = function(opt) {

		var args = Array.prototype.slice.call(arguments);

		var method = args[0];



		return this.each(function() {

			var $holder = jQuery(this);

			var instance = $holder.data('ScrollAbsoluteGallery');



			if (typeof opt === 'object' || typeof opt === 'undefined') {

				$holder.data('ScrollAbsoluteGallery', new ScrollAbsoluteGallery($.extend({

					holder: this

				}, opt)));

			} else if (typeof method === 'string' && instance) {

				if (typeof instance[method] === 'function') {

					args.shift();

					instance[method].apply(instance, args);

				}

			}

		});

	};

}(jQuery));

/*

 * Simple Mobile Navigation

 */

;(function($) {

	function MobileNav(options) {

		this.options = $.extend({

			container: null,

			hideOnClickOutside: false,

			menuActiveClass: 'nav-active',

			menuOpener: '.nav-opener',

			menuDrop: '.nav-drop',

			toggleEvent: 'click',

			outsideClickEvent: 'click touchstart pointerdown MSPointerDown'

		}, options);

		this.initStructure();

		this.attachEvents();

	}

	MobileNav.prototype = {

		initStructure: function() {

			this.page = $('html');

			this.container = $(this.options.container);

			this.opener = this.container.find(this.options.menuOpener);

			this.drop = this.container.find(this.options.menuDrop);

		},

		attachEvents: function() {

			var self = this;



			if(activateResizeHandler) {

				activateResizeHandler();

				activateResizeHandler = null;

			}



			this.outsideClickHandler = function(e) {

				if(self.isOpened()) {

					var target = $(e.target);

					if(!target.closest(self.opener).length && !target.closest(self.drop).length) {

						self.hide();

					}

				}

			};



			this.openerClickHandler = function(e) {

				e.preventDefault();

				self.toggle();

			};



			this.opener.on(this.options.toggleEvent, this.openerClickHandler);

		},

		isOpened: function() {

			return this.container.hasClass(this.options.menuActiveClass);

		},

		show: function() {

			this.container.addClass(this.options.menuActiveClass);

			if(this.options.hideOnClickOutside) {

				this.page.on(this.options.outsideClickEvent, this.outsideClickHandler);

			}

		},

		hide: function() {

			this.container.removeClass(this.options.menuActiveClass);

			if(this.options.hideOnClickOutside) {

				this.page.off(this.options.outsideClickEvent, this.outsideClickHandler);

			}

		},

		toggle: function() {

			if(this.isOpened()) {

				this.hide();

			} else {

				this.show();

			}

		},

		destroy: function() {

			this.container.removeClass(this.options.menuActiveClass);

			this.opener.off(this.options.toggleEvent, this.clickHandler);

			this.page.off(this.options.outsideClickEvent, this.outsideClickHandler);

		}

	};



	var activateResizeHandler = function() {

		var win = $(window),

			doc = $('html'),

			resizeClass = 'resize-active',

			flag, timer;

		var removeClassHandler = function() {

			flag = false;

			doc.removeClass(resizeClass);

		};

		var resizeHandler = function() {

			if(!flag) {

				flag = true;

				doc.addClass(resizeClass);

			}

			clearTimeout(timer);

			timer = setTimeout(removeClassHandler, 500);

		};

		win.on('resize orientationchange', resizeHandler);

	};



	$.fn.mobileNav = function(opt) {

		var args = Array.prototype.slice.call(arguments);

		var method = args[0];



		return this.each(function() {

			var $container = jQuery(this);

			var instance = $container.data('MobileNav');



			if (typeof opt === 'object' || typeof opt === 'undefined') {

				$container.data('MobileNav', new MobileNav($.extend({

					container: this

				}, opt)));

			} else if (typeof method === 'string' && instance) {

				if (typeof instance[method] === 'function') {

					args.shift();

					instance[method].apply(instance, args);

				}

			}

		});

	};

}(jQuery));

// navigation accesibility module

function TouchNav(opt) {

	this.options = {

		hoverClass: 'hover',

		menuItems: 'li',

		menuOpener: 'a',

		menuDrop: 'ul',

		navBlock: null

	};

	for (var p in opt) {

		if (opt.hasOwnProperty(p)) {

			this.options[p] = opt[p];

		}

	}

	this.init();

}

TouchNav.isActiveOn = function(elem) {

	return elem && elem.touchNavActive;

};

TouchNav.prototype = {

	init: function() {

		if (typeof this.options.navBlock === 'string') {

			this.menu = document.getElementById(this.options.navBlock);

		} else if (typeof this.options.navBlock === 'object') {

			this.menu = this.options.navBlock;

		}

		if (this.menu) {

			this.addEvents();

		}

	},

	addEvents: function() {

		// attach event handlers

		var self = this;

		var touchEvent = (navigator.pointerEnabled && 'pointerdown') || (navigator.msPointerEnabled && 'MSPointerDown') || (this.isTouchDevice && 'touchstart');

		this.menuItems = lib.queryElementsBySelector(this.options.menuItems, this.menu);



		var initMenuItem = function(item) {

			var currentDrop = lib.queryElementsBySelector(self.options.menuDrop, item)[0],

				currentOpener = lib.queryElementsBySelector(self.options.menuOpener, item)[0];



			// only for touch input devices

			if (currentDrop && currentOpener && (self.isTouchDevice || self.isPointerDevice)) {

				lib.event.add(currentOpener, 'click', lib.bind(self.clickHandler, self));

				lib.event.add(currentOpener, 'mousedown', lib.bind(self.mousedownHandler, self));

				lib.event.add(currentOpener, touchEvent, function(e) {

					if (!self.isTouchPointerEvent(e)) {

						self.preventCurrentClick = false;

						return;

					}

					self.touchFlag = true;

					self.currentItem = item;

					self.currentLink = currentOpener;

					self.pressHandler.apply(self, arguments);

				});

			}

			// for desktop computers and touch devices

			jQuery(item)

				.bind('mouseenter', function() {

					if (!self.touchFlag) {

						self.currentItem = item;

						self.mouseoverHandler();

					}

				});

			jQuery(item)

				.bind('mouseleave', function() {

					if (!self.touchFlag) {

						self.currentItem = item;

						self.mouseoutHandler();

					}

				});

			item.touchNavActive = true;

		};



		// addd handlers for all menu items

		for (var i = 0; i < this.menuItems.length; i++) {

			initMenuItem(self.menuItems[i]);

		}



		// hide dropdowns when clicking outside navigation

		if (this.isTouchDevice || this.isPointerDevice) {

			lib.event.add(document.documentElement, 'mousedown', lib.bind(this.clickOutsideHandler, this));

			lib.event.add(document.documentElement, touchEvent, lib.bind(this.clickOutsideHandler, this));

		}

	},

	mousedownHandler: function(e) {

		if (this.touchFlag) {

			e.preventDefault();

			this.touchFlag = false;

			this.preventCurrentClick = false;

		}

	},

	mouseoverHandler: function() {

		lib.addClass(this.currentItem, this.options.hoverClass);

		jQuery(this.currentItem)

			.trigger('itemhover');

	},

	mouseoutHandler: function() {

		lib.removeClass(this.currentItem, this.options.hoverClass);

		jQuery(this.currentItem)

			.trigger('itemleave');

	},

	hideActiveDropdown: function() {

		for (var i = 0; i < this.menuItems.length; i++) {

			if (lib.hasClass(this.menuItems[i], this.options.hoverClass)) {

				lib.removeClass(this.menuItems[i], this.options.hoverClass);

				jQuery(this.menuItems[i])

					.trigger('itemleave');

			}

		}

		this.activeParent = null;

	},

	pressHandler: function(e) {

		// hide previous drop (if active)

		if (this.currentItem !== this.activeParent) {

			if (this.activeParent && this.currentItem.parentNode === this.activeParent.parentNode) {

				lib.removeClass(this.activeParent, this.options.hoverClass);

			} else if (!this.isParent(this.activeParent, this.currentLink)) {

				this.hideActiveDropdown();

			}

		}

		// handle current drop

		this.activeParent = this.currentItem;

		if (lib.hasClass(this.currentItem, this.options.hoverClass)) {

			this.preventCurrentClick = false;

		} else {

			e.preventDefault();

			this.preventCurrentClick = true;

			lib.addClass(this.currentItem, this.options.hoverClass);

			jQuery(this.currentItem)

				.trigger('itemhover');

		}

	},

	clickHandler: function(e) {

		// prevent first click on link

		if (this.preventCurrentClick) {

			e.preventDefault();

		}

	},

	clickOutsideHandler: function(event) {

		var e = event.changedTouches ? event.changedTouches[0] : event;

		if (this.activeParent && !this.isParent(this.menu, e.target)) {

			this.hideActiveDropdown();

			this.touchFlag = false;

		}

	},

	isParent: function(parent, child) {

		while (child.parentNode) {

			if (child.parentNode == parent) {

				return true;

			}

			child = child.parentNode;

		}

		return false;

	},

	isTouchPointerEvent: function(e) {

		return (e.type.indexOf('touch') > -1) ||

			(navigator.pointerEnabled && e.pointerType === 'touch') ||

			(navigator.msPointerEnabled && e.pointerType == e.MSPOINTER_TYPE_TOUCH);

	},

	isPointerDevice: (function() {

		return !!(navigator.pointerEnabled || navigator.msPointerEnabled);

	}()),

	isTouchDevice: (function() {

		return !!(('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch);

	}())

};

/*

 * jQuery retina cover plugin

 */

;(function($) {

	'use strict';



	var styleRules = {};

	var templates = {

		'2x': [

			'(-webkit-min-device-pixel-ratio: 1.5)',

			'(min-resolution: 192dpi)',

			'(min-device-pixel-ratio: 1.5)',

			'(min-resolution: 1.5dppx)'

		],

		'3x': [

			'(-webkit-min-device-pixel-ratio: 3)',

			'(min-resolution: 384dpi)',

			'(min-device-pixel-ratio: 3)',

			'(min-resolution: 3dppx)'

		]

	};



	function addSimple(imageSrc, media, id) {

		var style = buildRule(id, imageSrc);



		addRule(media, style);

	}



	function addRetina(imageData, media, id) {

		var currentRules = templates[imageData[1]].slice();

		var patchedRules = currentRules;

		var style = buildRule(id, imageData[0]);



		if (media !== 'default') {

			patchedRules = $.map(currentRules, function(ele, i) {

				return ele + ' and ' + media;

			});

		}



		media = patchedRules.join(',');



		addRule(media, style);

	}



	function buildRule(id, src) {

		return '#' + id + '{background-image: url("' + src + '");}';

	}



	function addRule(media, rule) {

		var $styleTag = styleRules[media];

		var styleTagData;

		var rules = '';



		if (media === 'default') {

			rules = rule + ' ';

		} else {

			rules = '@media ' + media + '{' + rule + '}';

		}



		if (!$styleTag) {

			styleRules[media] = $('<style>').text(rules).appendTo('head');

		} else {

			styleTagData = $styleTag.text();

			styleTagData = styleTagData.substring(0, styleTagData.length - 2) + ' }' + rule + '}';

			$styleTag.text(styleTagData);

		}

	}



	$.fn.retinaCover = function() {

		return this.each(function() {

			var $block = $(this);

			var $items = $block.children('[data-srcset]');

			var id = 'bg-stretch' + Date.now() + (Math.random() * 1000).toFixed(0);



			if ($items.length) {

				$block.attr('id', id);



				$items.each(function() {

					var $item = $(this);

					var data = $item.data('srcset').split(', ');

					var media = $item.data('media') || 'default';

					var dataLength = data.length;

					var itemData;

					var i;



					for (i = 0; i < dataLength; i++) {

						itemData = data[i].split(' ');



						if (itemData.length === 1) {

							addSimple(itemData[0], media, id);

						} else {

							addRetina(itemData, media, id);

						}

					}

				});

			}



			$items.detach();

		});

	};

}(jQuery));

/*! Hammer.JS - v2.0.8 - 2016-04-23
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(a,b,c,d){"use strict";function e(a,b,c){return setTimeout(j(a,c),b)}function f(a,b,c){return Array.isArray(a)?(g(a,c[b],c),!0):!1}function g(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function h(b,c,d){var e="DEPRECATED METHOD: "+c+"\n"+d+" AT \n";return function(){var c=new Error("get-stack-trace"),d=c&&c.stack?c.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",f=a.console&&(a.console.warn||a.console.log);return f&&f.call(a.console,e,d),b.apply(this,arguments)}}function i(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&la(d,c)}function j(a,b){return function(){return a.apply(b,arguments)}}function k(a,b){return typeof a==oa?a.apply(b?b[0]||d:d,b):a}function l(a,b){return a===d?b:a}function m(a,b,c){g(q(b),function(b){a.addEventListener(b,c,!1)})}function n(a,b,c){g(q(b),function(b){a.removeEventListener(b,c,!1)})}function o(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function p(a,b){return a.indexOf(b)>-1}function q(a){return a.trim().split(/\s+/g)}function r(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function s(a){return Array.prototype.slice.call(a,0)}function t(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];r(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function u(a,b){for(var c,e,f=b[0].toUpperCase()+b.slice(1),g=0;g<ma.length;){if(c=ma[g],e=c?c+f:b,e in a)return e;g++}return d}function v(){return ua++}function w(b){var c=b.ownerDocument||b;return c.defaultView||c.parentWindow||a}function x(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){k(a.options.enable,[a])&&c.handler(b)},this.init()}function y(a){var b,c=a.options.inputClass;return new(b=c?c:xa?M:ya?P:wa?R:L)(a,z)}function z(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&Ea&&d-e===0,g=b&(Ga|Ha)&&d-e===0;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,A(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function A(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=D(b)),e>1&&!c.firstMultiple?c.firstMultiple=D(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=E(d);b.timeStamp=ra(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=I(h,i),b.distance=H(h,i),B(c,b),b.offsetDirection=G(b.deltaX,b.deltaY);var j=F(b.deltaTime,b.deltaX,b.deltaY);b.overallVelocityX=j.x,b.overallVelocityY=j.y,b.overallVelocity=qa(j.x)>qa(j.y)?j.x:j.y,b.scale=g?K(g.pointers,d):1,b.rotation=g?J(g.pointers,d):0,b.maxPointers=c.prevInput?b.pointers.length>c.prevInput.maxPointers?b.pointers.length:c.prevInput.maxPointers:b.pointers.length,C(c,b);var k=a.element;o(b.srcEvent.target,k)&&(k=b.srcEvent.target),b.target=k}function B(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};b.eventType!==Ea&&f.eventType!==Ga||(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function C(a,b){var c,e,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=Ha&&(i>Da||h.velocity===d)){var j=b.deltaX-h.deltaX,k=b.deltaY-h.deltaY,l=F(i,j,k);e=l.x,f=l.y,c=qa(l.x)>qa(l.y)?l.x:l.y,g=G(j,k),a.lastInterval=b}else c=h.velocity,e=h.velocityX,f=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=e,b.velocityY=f,b.direction=g}function D(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:pa(a.pointers[c].clientX),clientY:pa(a.pointers[c].clientY)},c++;return{timeStamp:ra(),pointers:b,center:E(b),deltaX:a.deltaX,deltaY:a.deltaY}}function E(a){var b=a.length;if(1===b)return{x:pa(a[0].clientX),y:pa(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:pa(c/b),y:pa(d/b)}}function F(a,b,c){return{x:b/a||0,y:c/a||0}}function G(a,b){return a===b?Ia:qa(a)>=qa(b)?0>a?Ja:Ka:0>b?La:Ma}function H(a,b,c){c||(c=Qa);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function I(a,b,c){c||(c=Qa);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function J(a,b){return I(b[1],b[0],Ra)+I(a[1],a[0],Ra)}function K(a,b){return H(b[0],b[1],Ra)/H(a[0],a[1],Ra)}function L(){this.evEl=Ta,this.evWin=Ua,this.pressed=!1,x.apply(this,arguments)}function M(){this.evEl=Xa,this.evWin=Ya,x.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function N(){this.evTarget=$a,this.evWin=_a,this.started=!1,x.apply(this,arguments)}function O(a,b){var c=s(a.touches),d=s(a.changedTouches);return b&(Ga|Ha)&&(c=t(c.concat(d),"identifier",!0)),[c,d]}function P(){this.evTarget=bb,this.targetIds={},x.apply(this,arguments)}function Q(a,b){var c=s(a.touches),d=this.targetIds;if(b&(Ea|Fa)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=s(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return o(a.target,i)}),b===Ea)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Ga|Ha)&&delete d[g[e].identifier],e++;return h.length?[t(f.concat(h),"identifier",!0),h]:void 0}function R(){x.apply(this,arguments);var a=j(this.handler,this);this.touch=new P(this.manager,a),this.mouse=new L(this.manager,a),this.primaryTouch=null,this.lastTouches=[]}function S(a,b){a&Ea?(this.primaryTouch=b.changedPointers[0].identifier,T.call(this,b)):a&(Ga|Ha)&&T.call(this,b)}function T(a){var b=a.changedPointers[0];if(b.identifier===this.primaryTouch){var c={x:b.clientX,y:b.clientY};this.lastTouches.push(c);var d=this.lastTouches,e=function(){var a=d.indexOf(c);a>-1&&d.splice(a,1)};setTimeout(e,cb)}}function U(a){for(var b=a.srcEvent.clientX,c=a.srcEvent.clientY,d=0;d<this.lastTouches.length;d++){var e=this.lastTouches[d],f=Math.abs(b-e.x),g=Math.abs(c-e.y);if(db>=f&&db>=g)return!0}return!1}function V(a,b){this.manager=a,this.set(b)}function W(a){if(p(a,jb))return jb;var b=p(a,kb),c=p(a,lb);return b&&c?jb:b||c?b?kb:lb:p(a,ib)?ib:hb}function X(){if(!fb)return!1;var b={},c=a.CSS&&a.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(d){b[d]=c?a.CSS.supports("touch-action",d):!0}),b}function Y(a){this.options=la({},this.defaults,a||{}),this.id=v(),this.manager=null,this.options.enable=l(this.options.enable,!0),this.state=nb,this.simultaneous={},this.requireFail=[]}function Z(a){return a&sb?"cancel":a&qb?"end":a&pb?"move":a&ob?"start":""}function $(a){return a==Ma?"down":a==La?"up":a==Ja?"left":a==Ka?"right":""}function _(a,b){var c=b.manager;return c?c.get(a):a}function aa(){Y.apply(this,arguments)}function ba(){aa.apply(this,arguments),this.pX=null,this.pY=null}function ca(){aa.apply(this,arguments)}function da(){Y.apply(this,arguments),this._timer=null,this._input=null}function ea(){aa.apply(this,arguments)}function fa(){aa.apply(this,arguments)}function ga(){Y.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ha(a,b){return b=b||{},b.recognizers=l(b.recognizers,ha.defaults.preset),new ia(a,b)}function ia(a,b){this.options=la({},ha.defaults,b||{}),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=a,this.input=y(this),this.touchAction=new V(this,this.options.touchAction),ja(this,!0),g(this.options.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function ja(a,b){var c=a.element;if(c.style){var d;g(a.options.cssProps,function(e,f){d=u(c.style,f),b?(a.oldCssProps[d]=c.style[d],c.style[d]=e):c.style[d]=a.oldCssProps[d]||""}),b||(a.oldCssProps={})}}function ka(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var la,ma=["","webkit","Moz","MS","ms","o"],na=b.createElement("div"),oa="function",pa=Math.round,qa=Math.abs,ra=Date.now;la="function"!=typeof Object.assign?function(a){if(a===d||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var e=arguments[c];if(e!==d&&null!==e)for(var f in e)e.hasOwnProperty(f)&&(b[f]=e[f])}return b}:Object.assign;var sa=h(function(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;)(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++;return a},"extend","Use `assign`."),ta=h(function(a,b){return sa(a,b,!0)},"merge","Use `assign`."),ua=1,va=/mobile|tablet|ip(ad|hone|od)|android/i,wa="ontouchstart"in a,xa=u(a,"PointerEvent")!==d,ya=wa&&va.test(navigator.userAgent),za="touch",Aa="pen",Ba="mouse",Ca="kinect",Da=25,Ea=1,Fa=2,Ga=4,Ha=8,Ia=1,Ja=2,Ka=4,La=8,Ma=16,Na=Ja|Ka,Oa=La|Ma,Pa=Na|Oa,Qa=["x","y"],Ra=["clientX","clientY"];x.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(w(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(w(this.element),this.evWin,this.domHandler)}};var Sa={mousedown:Ea,mousemove:Fa,mouseup:Ga},Ta="mousedown",Ua="mousemove mouseup";i(L,x,{handler:function(a){var b=Sa[a.type];b&Ea&&0===a.button&&(this.pressed=!0),b&Fa&&1!==a.which&&(b=Ga),this.pressed&&(b&Ga&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:Ba,srcEvent:a}))}});var Va={pointerdown:Ea,pointermove:Fa,pointerup:Ga,pointercancel:Ha,pointerout:Ha},Wa={2:za,3:Aa,4:Ba,5:Ca},Xa="pointerdown",Ya="pointermove pointerup pointercancel";a.MSPointerEvent&&!a.PointerEvent&&(Xa="MSPointerDown",Ya="MSPointerMove MSPointerUp MSPointerCancel"),i(M,x,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Va[d],f=Wa[a.pointerType]||a.pointerType,g=f==za,h=r(b,a.pointerId,"pointerId");e&Ea&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Ga|Ha)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var Za={touchstart:Ea,touchmove:Fa,touchend:Ga,touchcancel:Ha},$a="touchstart",_a="touchstart touchmove touchend touchcancel";i(N,x,{handler:function(a){var b=Za[a.type];if(b===Ea&&(this.started=!0),this.started){var c=O.call(this,a,b);b&(Ga|Ha)&&c[0].length-c[1].length===0&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:za,srcEvent:a})}}});var ab={touchstart:Ea,touchmove:Fa,touchend:Ga,touchcancel:Ha},bb="touchstart touchmove touchend touchcancel";i(P,x,{handler:function(a){var b=ab[a.type],c=Q.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:za,srcEvent:a})}});var cb=2500,db=25;i(R,x,{handler:function(a,b,c){var d=c.pointerType==za,e=c.pointerType==Ba;if(!(e&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)S.call(this,b,c);else if(e&&U.call(this,c))return;this.callback(a,b,c)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var eb=u(na.style,"touchAction"),fb=eb!==d,gb="compute",hb="auto",ib="manipulation",jb="none",kb="pan-x",lb="pan-y",mb=X();V.prototype={set:function(a){a==gb&&(a=this.compute()),fb&&this.manager.element.style&&mb[a]&&(this.manager.element.style[eb]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return g(this.manager.recognizers,function(b){k(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),W(a.join(" "))},preventDefaults:function(a){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=p(d,jb)&&!mb[jb],f=p(d,lb)&&!mb[lb],g=p(d,kb)&&!mb[kb];if(e){var h=1===a.pointers.length,i=a.distance<2,j=a.deltaTime<250;if(h&&i&&j)return}return g&&f?void 0:e||f&&c&Na||g&&c&Oa?this.preventSrc(b):void 0},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var nb=1,ob=2,pb=4,qb=8,rb=qb,sb=16,tb=32;Y.prototype={defaults:{},set:function(a){return la(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(f(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=_(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return f(a,"dropRecognizeWith",this)?this:(a=_(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(f(a,"requireFailure",this))return this;var b=this.requireFail;return a=_(a,this),-1===r(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(f(a,"dropRequireFailure",this))return this;a=_(a,this);var b=r(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(b,a)}var c=this,d=this.state;qb>d&&b(c.options.event+Z(d)),b(c.options.event),a.additionalEvent&&b(a.additionalEvent),d>=qb&&b(c.options.event+Z(d))},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=tb)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(tb|nb)))return!1;a++}return!0},recognize:function(a){var b=la({},a);return k(this.options.enable,[this,b])?(this.state&(rb|sb|tb)&&(this.state=nb),this.state=this.process(b),void(this.state&(ob|pb|qb|sb)&&this.tryEmit(b))):(this.reset(),void(this.state=tb))},process:function(a){},getTouchAction:function(){},reset:function(){}},i(aa,Y,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(ob|pb),e=this.attrTest(a);return d&&(c&Ha||!e)?b|sb:d||e?c&Ga?b|qb:b&ob?b|pb:ob:tb}}),i(ba,aa,{defaults:{event:"pan",threshold:10,pointers:1,direction:Pa},getTouchAction:function(){var a=this.options.direction,b=[];return a&Na&&b.push(lb),a&Oa&&b.push(kb),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Na?(e=0===f?Ia:0>f?Ja:Ka,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Ia:0>g?La:Ma,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return aa.prototype.attrTest.call(this,a)&&(this.state&ob||!(this.state&ob)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=$(a.direction);b&&(a.additionalEvent=this.options.event+b),this._super.emit.call(this,a)}}),i(ca,aa,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[jb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&ob)},emit:function(a){if(1!==a.scale){var b=a.scale<1?"in":"out";a.additionalEvent=this.options.event+b}this._super.emit.call(this,a)}}),i(da,Y,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[hb]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Ga|Ha)&&!f)this.reset();else if(a.eventType&Ea)this.reset(),this._timer=e(function(){this.state=rb,this.tryEmit()},b.time,this);else if(a.eventType&Ga)return rb;return tb},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===rb&&(a&&a.eventType&Ga?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=ra(),this.manager.emit(this.options.event,this._input)))}}),i(ea,aa,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[jb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&ob)}}),i(fa,aa,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Na|Oa,pointers:1},getTouchAction:function(){return ba.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Na|Oa)?b=a.overallVelocity:c&Na?b=a.overallVelocityX:c&Oa&&(b=a.overallVelocityY),this._super.attrTest.call(this,a)&&c&a.offsetDirection&&a.distance>this.options.threshold&&a.maxPointers==this.options.pointers&&qa(b)>this.options.velocity&&a.eventType&Ga},emit:function(a){var b=$(a.offsetDirection);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),i(ga,Y,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ib]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;if(this.reset(),a.eventType&Ea&&0===this.count)return this.failTimeout();if(d&&f&&c){if(a.eventType!=Ga)return this.failTimeout();var g=this.pTime?a.timeStamp-this.pTime<b.interval:!0,h=!this.pCenter||H(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a;var i=this.count%b.taps;if(0===i)return this.hasRequireFailures()?(this._timer=e(function(){this.state=rb,this.tryEmit()},b.interval,this),ob):rb}return tb},failTimeout:function(){return this._timer=e(function(){this.state=tb},this.options.interval,this),tb},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==rb&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ha.VERSION="2.0.8",ha.defaults={domEvents:!1,touchAction:gb,enable:!0,inputTarget:null,inputClass:null,preset:[[ea,{enable:!1}],[ca,{enable:!1},["rotate"]],[fa,{direction:Na}],[ba,{direction:Na},["swipe"]],[ga],[ga,{event:"doubletap",taps:2},["tap"]],[da]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ub=1,vb=2;ia.prototype={set:function(a){return la(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?vb:ub},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&rb)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],b.stopped===vb||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(ob|pb|qb)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof Y)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(f(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(f(a,"remove",this))return this;if(a=this.get(a)){var b=this.recognizers,c=r(b,a);-1!==c&&(b.splice(c,1),this.touchAction.update())}return this},on:function(a,b){if(a!==d&&b!==d){var c=this.handlers;return g(q(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this}},off:function(a,b){if(a!==d){var c=this.handlers;return g(q(a),function(a){b?c[a]&&c[a].splice(r(c[a],b),1):delete c[a]}),this}},emit:function(a,b){this.options.domEvents&&ka(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&ja(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},la(ha,{INPUT_START:Ea,INPUT_MOVE:Fa,INPUT_END:Ga,INPUT_CANCEL:Ha,STATE_POSSIBLE:nb,STATE_BEGAN:ob,STATE_CHANGED:pb,STATE_ENDED:qb,STATE_RECOGNIZED:rb,STATE_CANCELLED:sb,STATE_FAILED:tb,DIRECTION_NONE:Ia,DIRECTION_LEFT:Ja,DIRECTION_RIGHT:Ka,DIRECTION_UP:La,DIRECTION_DOWN:Ma,DIRECTION_HORIZONTAL:Na,DIRECTION_VERTICAL:Oa,DIRECTION_ALL:Pa,Manager:ia,Input:x,TouchAction:V,TouchInput:P,MouseInput:L,PointerEventInput:M,TouchMouseInput:R,SingleTouchInput:N,Recognizer:Y,AttrRecognizer:aa,Tap:ga,Pan:ba,Swipe:fa,Pinch:ca,Rotate:ea,Press:da,on:m,off:n,each:g,merge:ta,extend:sa,assign:la,inherit:i,bindFn:j,prefixed:u});var wb="undefined"!=typeof a?a:"undefined"!=typeof self?self:{};wb.Hammer=ha,"function"==typeof define&&define.amd?define(function(){return ha}):"undefined"!=typeof module&&module.exports?module.exports=ha:a[c]=ha}(window,document,"Hammer");

/*

 * Utility module

 */

lib = {

	hasClass: function(el,cls) {

		return el && el.className ? el.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)')) : false;

	},

	addClass: function(el,cls) {

		if (el && !this.hasClass(el,cls)) el.className += " "+cls;

	},

	removeClass: function(el,cls) {

		if (el && this.hasClass(el,cls)) {el.className=el.className.replace(new RegExp('(\\s|^)'+cls+'(\\s|$)'),' ');}

	},

	extend: function(obj) {

		for(var i = 1; i < arguments.length; i++) {

			for(var p in arguments[i]) {

				if(arguments[i].hasOwnProperty(p)) {

					obj[p] = arguments[i][p];

				}

			}

		}

		return obj;

	},

	each: function(obj, callback) {

		var property, len;

		if(typeof obj.length === 'number') {

			for(property = 0, len = obj.length; property < len; property++) {

				if(callback.call(obj[property], property, obj[property]) === false) {

					break;

				}

			}

		} else {

			for(property in obj) {

				if(obj.hasOwnProperty(property)) {

					if(callback.call(obj[property], property, obj[property]) === false) {

						break;

					}

				}

			}

		}

	},

	event: (function() {

		var fixEvent = function(e) {

			e = e || window.event;

			if(e.isFixed) return e; else e.isFixed = true;

			if(!e.target) e.target = e.srcElement;

			e.preventDefault = e.preventDefault || function() {this.returnValue = false;};

			e.stopPropagation = e.stopPropagation || function() {this.cancelBubble = true;};

			return e;

		};

		return {

			add: function(elem, event, handler) {

				if(!elem.events) {

					elem.events = {};

					elem.handle = function(e) {

						var ret, handlers = elem.events[e.type];

						e = fixEvent(e);

						for(var i = 0, len = handlers.length; i < len; i++) {

							if(handlers[i]) {

								ret = handlers[i].call(elem, e);

								if(ret === false) {

									e.preventDefault();

									e.stopPropagation();

								}

							}

						}

					};

				}

				if(!elem.events[event]) {

					elem.events[event] = [];

					if(elem.addEventListener) elem.addEventListener(event, elem.handle, false);

					else if(elem.attachEvent) elem.attachEvent('on'+event, elem.handle);

				}

				elem.events[event].push(handler);

			},

			remove: function(elem, event, handler) {

				var handlers = elem.events[event];

				for(var i = handlers.length - 1; i >= 0; i--) {

					if(handlers[i] === handler) {

						handlers.splice(i,1);

					}

				}

				if(!handlers.length) {

					delete elem.events[event];

					if(elem.removeEventListener) elem.removeEventListener(event, elem.handle, false);

					else if(elem.detachEvent) elem.detachEvent('on'+event, elem.handle);

				}

			}

		};

	}()),

	queryElementsBySelector: function(selector, scope) {

		scope = scope || document;

		if(!selector) return [];

		if(selector === '>*') return scope.children;

		if(typeof document.querySelectorAll === 'function') {

			return scope.querySelectorAll(selector);

		}

		var selectors = selector.split(',');

		var resultList = [];

		for(var s = 0; s < selectors.length; s++) {

			var currentContext = [scope || document];

			var tokens = selectors[s].replace(/^\s+/,'').replace(/\s+$/,'').split(' ');

			for (var i = 0; i < tokens.length; i++) {

				token = tokens[i].replace(/^\s+/,'').replace(/\s+$/,'');

				if (token.indexOf('#') > -1) {

					var bits = token.split('#'), tagName = bits[0], id = bits[1];

					var element = document.getElementById(id);

					if (element && tagName && element.nodeName.toLowerCase() != tagName) {

						return [];

					}

					currentContext = element ? [element] : [];

					continue;

				}

				if (token.indexOf('.') > -1) {

					var bits = token.split('.'), tagName = bits[0] || '*', className = bits[1], found = [], foundCount = 0;

					for (var h = 0; h < currentContext.length; h++) {

						var elements;

						if (tagName == '*') {

							elements = currentContext[h].getElementsByTagName('*');

						} else {

							elements = currentContext[h].getElementsByTagName(tagName);

						}

						for (var j = 0; j < elements.length; j++) {

							found[foundCount++] = elements[j];

						}

					}

					currentContext = [];

					var currentContextIndex = 0;

					for (var k = 0; k < found.length; k++) {

						if (found[k].className && found[k].className.match(new RegExp('(\\s|^)'+className+'(\\s|$)'))) {

							currentContext[currentContextIndex++] = found[k];

						}

					}

					continue;

				}

				if (token.match(/^(\w*)\[(\w+)([=~\|\^\$\*]?)=?"?([^\]"]*)"?\]$/)) {

					var tagName = RegExp.$1 || '*', attrName = RegExp.$2, attrOperator = RegExp.$3, attrValue = RegExp.$4;

					if(attrName.toLowerCase() == 'for' && this.browser.msie && this.browser.version < 8) {

						attrName = 'htmlFor';

					}

					var found = [], foundCount = 0;

					for (var h = 0; h < currentContext.length; h++) {

						var elements;

						if (tagName == '*') {

							elements = currentContext[h].getElementsByTagName('*');

						} else {

							elements = currentContext[h].getElementsByTagName(tagName);

						}

						for (var j = 0; elements[j]; j++) {

							found[foundCount++] = elements[j];

						}

					}

					currentContext = [];

					var currentContextIndex = 0, checkFunction;

					switch (attrOperator) {

						case '=': checkFunction = function(e) { return (e.getAttribute(attrName) == attrValue) }; break;

						case '~': checkFunction = function(e) { return (e.getAttribute(attrName).match(new RegExp('(\\s|^)'+attrValue+'(\\s|$)'))) }; break;

						case '|': checkFunction = function(e) { return (e.getAttribute(attrName).match(new RegExp('^'+attrValue+'-?'))) }; break;

						case '^': checkFunction = function(e) { return (e.getAttribute(attrName).indexOf(attrValue) == 0) }; break;

						case '$': checkFunction = function(e) { return (e.getAttribute(attrName).lastIndexOf(attrValue) == e.getAttribute(attrName).length - attrValue.length) }; break;

						case '*': checkFunction = function(e) { return (e.getAttribute(attrName).indexOf(attrValue) > -1) }; break;

						default : checkFunction = function(e) { return e.getAttribute(attrName) };

					}

					currentContext = [];

					var currentContextIndex = 0;

					for (var k = 0; k < found.length; k++) {

						if (checkFunction(found[k])) {

							currentContext[currentContextIndex++] = found[k];

						}

					}

					continue;

				}

				tagName = token;

				var found = [], foundCount = 0;

				for (var h = 0; h < currentContext.length; h++) {

					var elements = currentContext[h].getElementsByTagName(tagName);

					for (var j = 0; j < elements.length; j++) {

						found[foundCount++] = elements[j];

					}

				}

				currentContext = found;

			}

			resultList = [].concat(resultList,currentContext);

		}

		return resultList;

	},

	trim: function (str) {

		return str.replace(/^\s+/, '').replace(/\s+$/, '');

	},

	bind: function(f, scope, forceArgs){

		return function() {return f.apply(scope, typeof forceArgs !== 'undefined' ? [forceArgs] : arguments);};

	}

};


/*
 * jQuery Accordion plugin
 */
;(function(root, factory) {
	'use strict';
	if (typeof define === 'function' && define.amd) {
		define(['jquery'], factory);
	} else if (typeof exports === 'object') {
		module.exports = factory(require('jquery'));
	} else {
		root.SlideAccordion = factory(jQuery);
	}
}(this, function($) {
	'use strict';
	var accHiddenClass = 'js-acc-hidden';

	function SlideAccordion(options) {
		this.options = $.extend(true, {
			allowClickWhenExpanded: false,
			activeClass:'active',
			opener:'.opener',
			slider:'.slide',
			animSpeed: 300,
			collapsible:true,
			event: 'click',
			scrollToActiveItem: {
				enable: false,
				breakpoint: 767, // max-width
				animSpeed: 600,
				extraOffset: null
			}
		}, options);
		this.init();
	}

	SlideAccordion.prototype = {
		init: function() {
			if (this.options.holder) {
				this.findElements();
				this.setStateOnInit();
				this.attachEvents();
				this.makeCallback('onInit');
			}
		},

		findElements: function() {
			this.$holder = $(this.options.holder).data('SlideAccordion', this);
			this.$items = this.$holder.find(':has(' + this.options.slider + ')');
		},

		setStateOnInit: function() {
			var self = this;

			this.$items.each(function() {
				if (!$(this).hasClass(self.options.activeClass)) {
					$(this).find(self.options.slider).addClass(accHiddenClass);
				}
			});
		},

		attachEvents: function() {
			var self = this;

			this.accordionToggle = function(e) {
				var $item = jQuery(this).closest(self.$items);
				var $actiItem = self.getActiveItem($item);

				if (!self.options.allowClickWhenExpanded || !$item.hasClass(self.options.activeClass)) {
					e.preventDefault();
					self.toggle($item, $actiItem);
				}
			};

			this.$items.on(this.options.event, this.options.opener, this.accordionToggle);
		},

		toggle: function($item, $prevItem) {
			if (!$item.hasClass(this.options.activeClass)) {
				this.show($item);
			} else if (this.options.collapsible) {
				this.hide($item);
			}

			if (!$item.is($prevItem) && $prevItem.length) {
				this.hide($prevItem);
			}

			this.makeCallback('beforeToggle');
		},

		show: function($item) {
			var $slider = $item.find(this.options.slider);

			$item.addClass(this.options.activeClass);
			$slider.stop().hide().removeClass(accHiddenClass).slideDown({
				duration: this.options.animSpeed,
				complete: function() {
					$slider.removeAttr('style');
					if (
						this.options.scrollToActiveItem.enable &&
						window.innerWidth <= this.options.scrollToActiveItem.breakpoint
					) {
						this.goToItem($item);
					}
					this.makeCallback('onShow', $item);
				}.bind(this)
			});

			this.makeCallback('beforeShow', $item);
		},

		hide: function($item) {
			var $slider = $item.find(this.options.slider);

			$item.removeClass(this.options.activeClass);
			$slider.stop().show().slideUp({
				duration: this.options.animSpeed,
				complete: function() {
					$slider.addClass(accHiddenClass);
					$slider.removeAttr('style');
					this.makeCallback('onHide', $item);
				}.bind(this)
			});

			this.makeCallback('beforeHide', $item);
		},

		goToItem: function($item) {
			var itemOffset = $item.offset().top;

			if (itemOffset < $(window).scrollTop()) {
				// handle extra offset
				if (typeof this.options.scrollToActiveItem.extraOffset === 'number') {
					itemOffset -= this.options.scrollToActiveItem.extraOffset;
				} else if (typeof this.options.scrollToActiveItem.extraOffset === 'function') {
					itemOffset -= this.options.scrollToActiveItem.extraOffset();
				}

				$('body, html').animate({
					scrollTop: itemOffset
				}, this.options.scrollToActiveItem.animSpeed);
			}
		},

		getActiveItem: function($item) {
			return $item.siblings().filter('.' + this.options.activeClass);
		},

		makeCallback: function(name) {
			if (typeof this.options[name] === 'function') {
				var args = Array.prototype.slice.call(arguments);
				args.shift();
				this.options[name].apply(this, args);
			}
		},

		destroy: function() {
			this.$holder.removeData('SlideAccordion');
			this.$items.off(this.options.event, this.options.opener, this.accordionToggle);
			this.$items.removeClass(this.options.activeClass).each(function(i, item) {
				$(item).find(this.options.slider).removeAttr('style').removeClass(accHiddenClass);
			}.bind(this));
			this.makeCallback('onDestroy');
		}
	};

	$.fn.slideAccordion = function(opt) {
		var args = Array.prototype.slice.call(arguments);
		var method = args[0];

		return this.each(function() {
			var $holder = jQuery(this);
			var instance = $holder.data('SlideAccordion');

			if (typeof opt === 'object' || typeof opt === 'undefined') {
				new SlideAccordion($.extend(true, {
					holder: this
				}, opt));
			} else if (typeof method === 'string' && instance) {
				if(typeof instance[method] === 'function') {
					args.shift();
					instance[method].apply(instance, args);
				}
			}
		});
	};

	(function() {
		var tabStyleSheet = $('<style type="text/css">')[0];
		var tabStyleRule = '.' + accHiddenClass;
		tabStyleRule += '{position:absolute !important;left:-9999px !important;top:-9999px !important;display:block !important; width: 100% !important;}';
		if (tabStyleSheet.styleSheet) {
			tabStyleSheet.styleSheet.cssText = tabStyleRule;
		} else {
			tabStyleSheet.appendChild(document.createTextNode(tabStyleRule));
		}
		$('head').append(tabStyleSheet);
	}());

	return SlideAccordion;
}));

/*!
 * SmoothScroll module
 */
;(function($, exports) {
	// private variables
	var page,
		win = $(window),
		activeBlock, activeWheelHandler,
		wheelEvents = ('onwheel' in document || document.documentMode >= 9 ? 'wheel' : 'mousewheel DOMMouseScroll');

	// animation handlers
	function scrollTo(offset, options, callback) {
		// initialize variables
		var scrollBlock;
		if (document.body) {
			if (typeof options === 'number') {
				options = {
					duration: options
				};
			} else {
				options = options || {};
			}
			page = page || $('html, body');
			scrollBlock = options.container || page;
		} else {
			return;
		}

		// treat single number as scrollTop
		if (typeof offset === 'number') {
			offset = {
				top: offset
			};
		}

		// handle mousewheel/trackpad while animation is active
		if (activeBlock && activeWheelHandler) {
			activeBlock.off(wheelEvents, activeWheelHandler);
		}
		if (options.wheelBehavior && options.wheelBehavior !== 'none') {
			activeWheelHandler = function(e) {
				if (options.wheelBehavior === 'stop') {
					scrollBlock.off(wheelEvents, activeWheelHandler);
					scrollBlock.stop();
				} else if (options.wheelBehavior === 'ignore') {
					e.preventDefault();
				}
			};
			activeBlock = scrollBlock.on(wheelEvents, activeWheelHandler);
		}

		// start scrolling animation
		scrollBlock.stop().animate({
			scrollLeft: offset.left,
			scrollTop: offset.top
		}, options.duration, function() {
			if (activeWheelHandler) {
				scrollBlock.off(wheelEvents, activeWheelHandler);
			}
			if ($.isFunction(callback)) {
				callback();
			}
		});
	}

	// smooth scroll contstructor
	function SmoothScroll(options) {
		this.options = $.extend({
			anchorLinks: 'a[href^="#"]', // selector or jQuery object
			container: null, // specify container for scrolling (default - whole page)
			extraOffset: null, // function or fixed number
			activeClasses: null, // null, "link", "parent"
			easing: 'swing', // easing of scrolling
			animMode: 'duration', // or "speed" mode
			animDuration: 800, // total duration for scroll (any distance)
			animSpeed: 1500, // pixels per second
			anchorActiveClass: 'anchor-active',
			sectionActiveClass: 'section-active',
			wheelBehavior: 'stop', // "stop", "ignore" or "none"
			useNativeAnchorScrolling: false // do not handle click in devices with native smooth scrolling
		}, options);
		this.init();
	}
	SmoothScroll.prototype = {
		init: function() {
			this.initStructure();
			this.attachEvents();
			this.isInit = true;
		},
		initStructure: function() {
			var self = this;

			this.container = this.options.container ? $(this.options.container) : $('html,body');
			this.scrollContainer = this.options.container ? this.container : win;
			this.anchorLinks = jQuery(this.options.anchorLinks).filter(function() {
				return jQuery(self.getAnchorTarget(jQuery(this))).length;
			});
		},
		getId: function(str) {
			try {
				return '#' + str.replace(/^.*?(#|$)/, '');
			} catch (err) {
				return null;
			}
		},
		getAnchorTarget: function(link) {
			// get target block from link href
			var targetId = this.getId($(link).attr('href'));
			return $(targetId.length > 1 ? targetId : 'html');
		},
		getTargetOffset: function(block) {
			// get target offset
			var blockOffset = block.offset().top;
			if (this.options.container) {
				blockOffset -= this.container.offset().top - this.container.prop('scrollTop');
			}

			// handle extra offset
			if (typeof this.options.extraOffset === 'number') {
				blockOffset -= this.options.extraOffset;
			} else if (typeof this.options.extraOffset === 'function') {
				blockOffset -= this.options.extraOffset(block);
			}
			return {
				top: blockOffset
			};
		},
		attachEvents: function() {
			var self = this;

			// handle active classes
			if (this.options.activeClasses && this.anchorLinks.length) {
				// cache structure
				this.anchorData = [];

				for (var i = 0; i < this.anchorLinks.length; i++) {
					var link = jQuery(this.anchorLinks[i]),
						targetBlock = self.getAnchorTarget(link),
						anchorDataItem = null;

					$.each(self.anchorData, function(index, item) {
						if (item.block[0] === targetBlock[0]) {
							anchorDataItem = item;
						}
					});

					if (anchorDataItem) {
						anchorDataItem.link = anchorDataItem.link.add(link);
					} else {
						self.anchorData.push({
							link: link,
							block: targetBlock
						});
					}
				};

				// add additional event handlers
				this.resizeHandler = function() {
					if (!self.isInit) return;
					self.recalculateOffsets();
				};
				this.scrollHandler = function() {
					self.refreshActiveClass();
				};

				this.recalculateOffsets();
				this.scrollContainer.on('scroll', this.scrollHandler);
				win.on('resize load orientationchange refreshAnchor', this.resizeHandler);
			}

			// handle click event
			this.clickHandler = function(e) {
				self.onClick(e);
			};
			if (!this.options.useNativeAnchorScrolling) {
				this.anchorLinks.on('click', this.clickHandler);
			}
		},
		recalculateOffsets: function() {
			var self = this;
			$.each(this.anchorData, function(index, data) {
				data.offset = self.getTargetOffset(data.block);
				data.height = data.block.outerHeight();
			});
			this.refreshActiveClass();
		},
		toggleActiveClass: function(anchor, block, state) {
			anchor.toggleClass(this.options.anchorActiveClass, state);
			block.toggleClass(this.options.sectionActiveClass, state);
		},
		refreshActiveClass: function() {
			var self = this,
				foundFlag = false,
				containerHeight = this.container.prop('scrollHeight'),
				viewPortHeight = this.scrollContainer.height(),
				scrollTop = this.options.container ? this.container.prop('scrollTop') : win.scrollTop();

			// user function instead of default handler
			if (this.options.customScrollHandler) {
				this.options.customScrollHandler.call(this, scrollTop, this.anchorData);
				return;
			}

			// sort anchor data by offsets
			this.anchorData.sort(function(a, b) {
				return a.offset.top - b.offset.top;
			});

			// default active class handler
			$.each(this.anchorData, function(index) {
				var reverseIndex = self.anchorData.length - index - 1,
					data = self.anchorData[reverseIndex],
					anchorElement = (self.options.activeClasses === 'parent' ? data.link.parent() : data.link);

				if (scrollTop >= containerHeight - viewPortHeight) {
					// handle last section
					if (reverseIndex === self.anchorData.length - 1) {
						self.toggleActiveClass(anchorElement, data.block, true);
					} else {
						self.toggleActiveClass(anchorElement, data.block, false);
					}
				} else {
					// handle other sections
					if (!foundFlag && (scrollTop >= data.offset.top - 1 || reverseIndex === 0)) {
						foundFlag = true;
						self.toggleActiveClass(anchorElement, data.block, true);
					} else {
						self.toggleActiveClass(anchorElement, data.block, false);
					}
				}
			});
		},
		calculateScrollDuration: function(offset) {
			var distance;
			if (this.options.animMode === 'speed') {
				distance = Math.abs(this.scrollContainer.scrollTop() - offset.top);
				return (distance / this.options.animSpeed) * 1000;
			} else {
				return this.options.animDuration;
			}
		},
		onClick: function(e) {
			var targetBlock = this.getAnchorTarget(e.currentTarget),
				targetOffset = this.getTargetOffset(targetBlock);

			e.preventDefault();
			scrollTo(targetOffset, {
				container: this.container,
				wheelBehavior: this.options.wheelBehavior,
				duration: this.calculateScrollDuration(targetOffset)
			});
			this.makeCallback('onBeforeScroll', e.currentTarget);
		},
		makeCallback: function(name) {
			if (typeof this.options[name] === 'function') {
				var args = Array.prototype.slice.call(arguments);
				args.shift();
				this.options[name].apply(this, args);
			}
		},
		destroy: function() {
			var self = this;

			this.isInit = false;
			if (this.options.activeClasses) {
				win.off('resize load orientationchange refreshAnchor', this.resizeHandler);
				this.scrollContainer.off('scroll', this.scrollHandler);
				$.each(this.anchorData, function(index) {
					var reverseIndex = self.anchorData.length - index - 1,
						data = self.anchorData[reverseIndex],
						anchorElement = (self.options.activeClasses === 'parent' ? data.link.parent() : data.link);

					self.toggleActiveClass(anchorElement, data.block, false);
				});
			}
			this.anchorLinks.off('click', this.clickHandler);
		}
	};

	// public API
	$.extend(SmoothScroll, {
		scrollTo: function(blockOrOffset, durationOrOptions, callback) {
			scrollTo(blockOrOffset, durationOrOptions, callback);
		}
	});

	// export module
	exports.SmoothScroll = SmoothScroll;
}(jQuery, this));

/*
 * jQuery Open/Close plugin
 */
;(function($) {
	function OpenClose(options) {
		this.options = $.extend({
			addClassBeforeAnimation: true,
			hideOnClickOutside: false,
			activeClass: 'active',
			opener: '.opener',
			slider: '.slide',
			animSpeed: 400,
			effect: 'fade',
			event: 'click'
		}, options);
		this.init();
	}
	OpenClose.prototype = {
		init: function() {
			if (this.options.holder) {
				this.findElements();
				this.attachEvents();
				this.makeCallback('onInit', this);
			}
		},
		findElements: function() {
			this.holder = $(this.options.holder);
			this.opener = this.holder.find(this.options.opener);
			this.slider = this.holder.find(this.options.slider);
		},
		attachEvents: function() {
			// add handler
			var self = this;
			this.eventHandler = function(e) {
				e.preventDefault();
				if (self.slider.hasClass(slideHiddenClass)) {
					self.showSlide();
				} else {
					self.hideSlide();
				}
			};
			self.opener.on(self.options.event, this.eventHandler);

			// hover mode handler
			if (self.options.event === 'hover') {
				self.opener.on('mouseenter', function() {
					if (!self.holder.hasClass(self.options.activeClass)) {
						self.showSlide();
					}
				});
				self.holder.on('mouseleave', function() {
					self.hideSlide();
				});
			}

			// outside click handler
			self.outsideClickHandler = function(e) {
				if (self.options.hideOnClickOutside) {
					var target = $(e.target);
					if (!target.is(self.holder) && !target.closest(self.holder).length) {
						self.hideSlide();
					}
				}
			};

			// set initial styles
			if (this.holder.hasClass(this.options.activeClass)) {
				$(document).on('click touchstart', self.outsideClickHandler);
			} else {
				this.slider.addClass(slideHiddenClass);
			}
		},
		showSlide: function() {
			var self = this;
			if (self.options.addClassBeforeAnimation) {
				self.holder.addClass(self.options.activeClass);
			}
			self.slider.removeClass(slideHiddenClass);
			$(document).on('click touchstart', self.outsideClickHandler);

			self.makeCallback('animStart', true);
			toggleEffects[self.options.effect].show({
				box: self.slider,
				speed: self.options.animSpeed,
				complete: function() {
					if (!self.options.addClassBeforeAnimation) {
						self.holder.addClass(self.options.activeClass);
					}
					self.makeCallback('animEnd', true);
				}
			});
		},
		hideSlide: function() {
			var self = this;
			if (self.options.addClassBeforeAnimation) {
				self.holder.removeClass(self.options.activeClass);
			}
			$(document).off('click touchstart', self.outsideClickHandler);

			self.makeCallback('animStart', false);
			toggleEffects[self.options.effect].hide({
				box: self.slider,
				speed: self.options.animSpeed,
				complete: function() {
					if (!self.options.addClassBeforeAnimation) {
						self.holder.removeClass(self.options.activeClass);
					}
					self.slider.addClass(slideHiddenClass);
					self.makeCallback('animEnd', false);
				}
			});
		},
		destroy: function() {
			this.slider.removeClass(slideHiddenClass).css({
				display: ''
			});
			this.opener.off(this.options.event, this.eventHandler);
			this.holder.removeClass(this.options.activeClass).removeData('OpenClose');
			$(document).off('click touchstart', this.outsideClickHandler);
		},
		makeCallback: function(name) {
			if (typeof this.options[name] === 'function') {
				var args = Array.prototype.slice.call(arguments);
				args.shift();
				this.options[name].apply(this, args);
			}
		}
	};

	// add stylesheet for slide on DOMReady
	var slideHiddenClass = 'js-slide-hidden';
	(function() {
		var tabStyleSheet = $('<style type="text/css">')[0];
		var tabStyleRule = '.' + slideHiddenClass;
		tabStyleRule += '{position:absolute !important;left:-9999px !important;top:-9999px !important;display:block !important}';
		if (tabStyleSheet.styleSheet) {
			tabStyleSheet.styleSheet.cssText = tabStyleRule;
		} else {
			tabStyleSheet.appendChild(document.createTextNode(tabStyleRule));
		}
		$('head').append(tabStyleSheet);
	}());

	// animation effects
	var toggleEffects = {
		slide: {
			show: function(o) {
				o.box.stop(true).hide().slideDown(o.speed, o.complete);
			},
			hide: function(o) {
				o.box.stop(true).slideUp(o.speed, o.complete);
			}
		},
		fade: {
			show: function(o) {
				o.box.stop(true).hide().fadeIn(o.speed, o.complete);
			},
			hide: function(o) {
				o.box.stop(true).fadeOut(o.speed, o.complete);
			}
		},
		none: {
			show: function(o) {
				o.box.hide().show(0, o.complete);
			},
			hide: function(o) {
				o.box.hide(0, o.complete);
			}
		}
	};

	// jQuery plugin interface
	$.fn.openClose = function(opt) {
		var args = Array.prototype.slice.call(arguments);
		var method = args[0];

		return this.each(function() {
			var $holder = jQuery(this);
			var instance = $holder.data('OpenClose');

			if (typeof opt === 'object' || typeof opt === 'undefined') {
				$holder.data('OpenClose', new OpenClose($.extend({
					holder: this
				}, opt)));
			} else if (typeof method === 'string' && instance) {
				if (typeof instance[method] === 'function') {
					args.shift();
					instance[method].apply(instance, args);
				}
			}
		});
	};
}(jQuery));



/*! Picturefill - v3.0.1 - 2015-09-30

 * http://scottjehl.github.io/picturefill

 * Copyright (c) 2015 https://github.com/scottjehl/picturefill/blob/master/Authors.txt; Licensed MIT

 */

!function(a){var b=navigator.userAgent;a.HTMLPictureElement&&/ecko/.test(b)&&b.match(/rv\:(\d+)/)&&RegExp.$1<41&&addEventListener("resize",function(){var b,c=document.createElement("source"),d=function(a){var b,d,e=a.parentNode;"PICTURE"===e.nodeName.toUpperCase()?(b=c.cloneNode(),e.insertBefore(b,e.firstElementChild),setTimeout(function(){e.removeChild(b)})):(!a._pfLastSize||a.offsetWidth>a._pfLastSize)&&(a._pfLastSize=a.offsetWidth,d=a.sizes,a.sizes+=",100vw",setTimeout(function(){a.sizes=d}))},e=function(){var a,b=document.querySelectorAll("picture > img, img[srcset][sizes]");for(a=0;a<b.length;a++)d(b[a])},f=function(){clearTimeout(b),b=setTimeout(e,99)},g=a.matchMedia&&matchMedia("(orientation: landscape)"),h=function(){f(),g&&g.addListener&&g.addListener(f)};return c.srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",/^[c|i]|d$/.test(document.readyState||"")?h():document.addEventListener("DOMContentLoaded",h),f}())}(window),function(a,b,c){"use strict";function d(a){return" "===a||"	"===a||"\n"===a||"\f"===a||"\r"===a}function e(b,c){var d=new a.Image;return d.onerror=function(){z[b]=!1,aa()},d.onload=function(){z[b]=1===d.width,aa()},d.src=c,"pending"}function f(){L=!1,O=a.devicePixelRatio,M={},N={},s.DPR=O||1,P.width=Math.max(a.innerWidth||0,y.clientWidth),P.height=Math.max(a.innerHeight||0,y.clientHeight),P.vw=P.width/100,P.vh=P.height/100,r=[P.height,P.width,O].join("-"),P.em=s.getEmValue(),P.rem=P.em}function g(a,b,c,d){var e,f,g,h;return"saveData"===A.algorithm?a>2.7?h=c+1:(f=b-c,e=Math.pow(a-.6,1.5),g=f*e,d&&(g+=.1*e),h=a+g):h=c>1?Math.sqrt(a*b):a,h>c}function h(a){var b,c=s.getSet(a),d=!1;"pending"!==c&&(d=r,c&&(b=s.setRes(c),s.applySetCandidate(b,a))),a[s.ns].evaled=d}function i(a,b){return a.res-b.res}function j(a,b,c){var d;return!c&&b&&(c=a[s.ns].sets,c=c&&c[c.length-1]),d=k(b,c),d&&(b=s.makeUrl(b),a[s.ns].curSrc=b,a[s.ns].curCan=d,d.res||_(d,d.set.sizes)),d}function k(a,b){var c,d,e;if(a&&b)for(e=s.parseSet(b),a=s.makeUrl(a),c=0;c<e.length;c++)if(a===s.makeUrl(e[c].url)){d=e[c];break}return d}function l(a,b){var c,d,e,f,g=a.getElementsByTagName("source");for(c=0,d=g.length;d>c;c++)e=g[c],e[s.ns]=!0,f=e.getAttribute("srcset"),f&&b.push({srcset:f,media:e.getAttribute("media"),type:e.getAttribute("type"),sizes:e.getAttribute("sizes")})}function m(a,b){function c(b){var c,d=b.exec(a.substring(m));return d?(c=d[0],m+=c.length,c):void 0}function e(){var a,c,d,e,f,i,j,k,l,m=!1,o={};for(e=0;e<h.length;e++)f=h[e],i=f[f.length-1],j=f.substring(0,f.length-1),k=parseInt(j,10),l=parseFloat(j),W.test(j)&&"w"===i?((a||c)&&(m=!0),0===k?m=!0:a=k):X.test(j)&&"x"===i?((a||c||d)&&(m=!0),0>l?m=!0:c=l):W.test(j)&&"h"===i?((d||c)&&(m=!0),0===k?m=!0:d=k):m=!0;m||(o.url=g,a&&(o.w=a),c&&(o.d=c),d&&(o.h=d),d||c||a||(o.d=1),1===o.d&&(b.has1x=!0),o.set=b,n.push(o))}function f(){for(c(S),i="",j="in descriptor";;){if(k=a.charAt(m),"in descriptor"===j)if(d(k))i&&(h.push(i),i="",j="after descriptor");else{if(","===k)return m+=1,i&&h.push(i),void e();if("("===k)i+=k,j="in parens";else{if(""===k)return i&&h.push(i),void e();i+=k}}else if("in parens"===j)if(")"===k)i+=k,j="in descriptor";else{if(""===k)return h.push(i),void e();i+=k}else if("after descriptor"===j)if(d(k));else{if(""===k)return void e();j="in descriptor",m-=1}m+=1}}for(var g,h,i,j,k,l=a.length,m=0,n=[];;){if(c(T),m>=l)return n;g=c(U),h=[],","===g.slice(-1)?(g=g.replace(V,""),e()):f()}}function n(a){function b(a){function b(){f&&(g.push(f),f="")}function c(){g[0]&&(h.push(g),g=[])}for(var e,f="",g=[],h=[],i=0,j=0,k=!1;;){if(e=a.charAt(j),""===e)return b(),c(),h;if(k){if("*"===e&&"/"===a[j+1]){k=!1,j+=2,b();continue}j+=1}else{if(d(e)){if(a.charAt(j-1)&&d(a.charAt(j-1))||!f){j+=1;continue}if(0===i){b(),j+=1;continue}e=" "}else if("("===e)i+=1;else if(")"===e)i-=1;else{if(","===e){b(),c(),j+=1;continue}if("/"===e&&"*"===a.charAt(j+1)){k=!0,j+=2;continue}}f+=e,j+=1}}}function c(a){return k.test(a)&&parseFloat(a)>=0?!0:l.test(a)?!0:"0"===a||"-0"===a||"+0"===a?!0:!1}var e,f,g,h,i,j,k=/^(?:[+-]?[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?(?:ch|cm|em|ex|in|mm|pc|pt|px|rem|vh|vmin|vmax|vw)$/i,l=/^calc\((?:[0-9a-z \.\+\-\*\/\(\)]+)\)$/i;for(f=b(a),g=f.length,e=0;g>e;e++)if(h=f[e],i=h[h.length-1],c(i)){if(j=i,h.pop(),0===h.length)return j;if(h=h.join(" "),s.matchesMedia(h))return j}return"100vw"}b.createElement("picture");var o,p,q,r,s={},t=function(){},u=b.createElement("img"),v=u.getAttribute,w=u.setAttribute,x=u.removeAttribute,y=b.documentElement,z={},A={algorithm:""},B="data-pfsrc",C=B+"set",D=navigator.userAgent,E=/rident/.test(D)||/ecko/.test(D)&&D.match(/rv\:(\d+)/)&&RegExp.$1>35,F="currentSrc",G=/\s+\+?\d+(e\d+)?w/,H=/(\([^)]+\))?\s*(.+)/,I=a.picturefillCFG,J="position:absolute;left:0;visibility:hidden;display:block;padding:0;border:none;font-size:1em;width:1em;overflow:hidden;clip:rect(0px, 0px, 0px, 0px)",K="font-size:100%!important;",L=!0,M={},N={},O=a.devicePixelRatio,P={px:1,"in":96},Q=b.createElement("a"),R=!1,S=/^[ \t\n\r\u000c]+/,T=/^[, \t\n\r\u000c]+/,U=/^[^ \t\n\r\u000c]+/,V=/[,]+$/,W=/^\d+$/,X=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,Y=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent&&a.attachEvent("on"+b,c)},Z=function(a){var b={};return function(c){return c in b||(b[c]=a(c)),b[c]}},$=function(){var a=/^([\d\.]+)(em|vw|px)$/,b=function(){for(var a=arguments,b=0,c=a[0];++b in a;)c=c.replace(a[b],a[++b]);return c},c=Z(function(a){return"return "+b((a||"").toLowerCase(),/\band\b/g,"&&",/,/g,"||",/min-([a-z-\s]+):/g,"e.$1>=",/max-([a-z-\s]+):/g,"e.$1<=",/calc([^)]+)/g,"($1)",/(\d+[\.]*[\d]*)([a-z]+)/g,"($1 * e.$2)",/^(?!(e.[a-z]|[0-9\.&=|><\+\-\*\(\)\/])).*/gi,"")+";"});return function(b,d){var e;if(!(b in M))if(M[b]=!1,d&&(e=b.match(a)))M[b]=e[1]*P[e[2]];else try{M[b]=new Function("e",c(b))(P)}catch(f){}return M[b]}}(),_=function(a,b){return a.w?(a.cWidth=s.calcListLength(b||"100vw"),a.res=a.w/a.cWidth):a.res=a.d,a},aa=function(a){var c,d,e,f=a||{};if(f.elements&&1===f.elements.nodeType&&("IMG"===f.elements.nodeName.toUpperCase()?f.elements=[f.elements]:(f.context=f.elements,f.elements=null)),c=f.elements||s.qsa(f.context||b,f.reevaluate||f.reselect?s.sel:s.selShort),e=c.length){for(s.setupRun(f),R=!0,d=0;e>d;d++)s.fillImg(c[d],f);s.teardownRun(f)}};o=a.console&&console.warn?function(a){console.warn(a)}:t,F in u||(F="src"),z["image/jpeg"]=!0,z["image/gif"]=!0,z["image/png"]=!0,z["image/svg+xml"]=b.implementation.hasFeature("http://wwwindow.w3.org/TR/SVG11/feature#Image","1.1"),s.ns=("pf"+(new Date).getTime()).substr(0,9),s.supSrcset="srcset"in u,s.supSizes="sizes"in u,s.supPicture=!!a.HTMLPictureElement,s.supSrcset&&s.supPicture&&!s.supSizes&&!function(a){u.srcset="data:,a",a.src="data:,a",s.supSrcset=u.complete===a.complete,s.supPicture=s.supSrcset&&s.supPicture}(b.createElement("img")),s.selShort="picture>img,img[srcset]",s.sel=s.selShort,s.cfg=A,s.supSrcset&&(s.sel+=",img["+C+"]"),s.DPR=O||1,s.u=P,s.types=z,q=s.supSrcset&&!s.supSizes,s.setSize=t,s.makeUrl=Z(function(a){return Q.href=a,Q.href}),s.qsa=function(a,b){return a.querySelectorAll(b)},s.matchesMedia=function(){return a.matchMedia&&(matchMedia("(min-width: 0.1em)")||{}).matches?s.matchesMedia=function(a){return!a||matchMedia(a).matches}:s.matchesMedia=s.mMQ,s.matchesMedia.apply(this,arguments)},s.mMQ=function(a){return a?$(a):!0},s.calcLength=function(a){var b=$(a,!0)||!1;return 0>b&&(b=!1),b},s.supportsType=function(a){return a?z[a]:!0},s.parseSize=Z(function(a){var b=(a||"").match(H);return{media:b&&b[1],length:b&&b[2]}}),s.parseSet=function(a){return a.cands||(a.cands=m(a.srcset,a)),a.cands},s.getEmValue=function(){var a;if(!p&&(a=b.body)){var c=b.createElement("div"),d=y.style.cssText,e=a.style.cssText;c.style.cssText=J,y.style.cssText=K,a.style.cssText=K,a.appendChild(c),p=c.offsetWidth,a.removeChild(c),p=parseFloat(p,10),y.style.cssText=d,a.style.cssText=e}return p||16},s.calcListLength=function(a){if(!(a in N)||A.uT){var b=s.calcLength(n(a));N[a]=b?b:P.width}return N[a]},s.setRes=function(a){var b;if(a){b=s.parseSet(a);for(var c=0,d=b.length;d>c;c++)_(b[c],a.sizes)}return b},s.setRes.res=_,s.applySetCandidate=function(a,b){if(a.length){var c,d,e,f,h,k,l,m,n,o=b[s.ns],p=s.DPR;if(k=o.curSrc||b[F],l=o.curCan||j(b,k,a[0].set),l&&l.set===a[0].set&&(n=E&&!b.complete&&l.res-.1>p,n||(l.cached=!0,l.res>=p&&(h=l))),!h)for(a.sort(i),f=a.length,h=a[f-1],d=0;f>d;d++)if(c=a[d],c.res>=p){e=d-1,h=a[e]&&(n||k!==s.makeUrl(c.url))&&g(a[e].res,c.res,p,a[e].cached)?a[e]:c;break}h&&(m=s.makeUrl(h.url),o.curSrc=m,o.curCan=h,m!==k&&s.setSrc(b,h),s.setSize(b))}},s.setSrc=function(a,b){var c;a.src=b.url,"image/svg+xml"===b.set.type&&(c=a.style.width,a.style.width=a.offsetWidth+1+"px",a.offsetWidth+1&&(a.style.width=c))},s.getSet=function(a){var b,c,d,e=!1,f=a[s.ns].sets;for(b=0;b<f.length&&!e;b++)if(c=f[b],c.srcset&&s.matchesMedia(c.media)&&(d=s.supportsType(c.type))){"pending"===d&&(c=d),e=c;break}return e},s.parseSets=function(a,b,d){var e,f,g,h,i=b&&"PICTURE"===b.nodeName.toUpperCase(),j=a[s.ns];(j.src===c||d.src)&&(j.src=v.call(a,"src"),j.src?w.call(a,B,j.src):x.call(a,B)),(j.srcset===c||d.srcset||!s.supSrcset||a.srcset)&&(e=v.call(a,"srcset"),j.srcset=e,h=!0),j.sets=[],i&&(j.pic=!0,l(b,j.sets)),j.srcset?(f={srcset:j.srcset,sizes:v.call(a,"sizes")},j.sets.push(f),g=(q||j.src)&&G.test(j.srcset||""),g||!j.src||k(j.src,f)||f.has1x||(f.srcset+=", "+j.src,f.cands.push({url:j.src,d:1,set:f}))):j.src&&j.sets.push({srcset:j.src,sizes:null}),j.curCan=null,j.curSrc=c,j.supported=!(i||f&&!s.supSrcset||g),h&&s.supSrcset&&!j.supported&&(e?(w.call(a,C,e),a.srcset=""):x.call(a,C)),j.supported&&!j.srcset&&(!j.src&&a.src||a.src!==s.makeUrl(j.src))&&(null===j.src?a.removeAttribute("src"):a.src=j.src),j.parsed=!0},s.fillImg=function(a,b){var c,d=b.reselect||b.reevaluate;a[s.ns]||(a[s.ns]={}),c=a[s.ns],(d||c.evaled!==r)&&((!c.parsed||b.reevaluate)&&s.parseSets(a,a.parentNode,b),c.supported?c.evaled=r:h(a))},s.setupRun=function(){(!R||L||O!==a.devicePixelRatio)&&f()},s.supPicture?(aa=t,s.fillImg=t):!function(){var c,d=a.attachEvent?/d$|^c/:/d$|^c|^i/,e=function(){var a=b.readyState||"";f=setTimeout(e,"loading"===a?200:999),b.body&&(s.fillImgs(),c=c||d.test(a),c&&clearTimeout(f))},f=setTimeout(e,b.body?9:99),g=function(a,b){var c,d,e=function(){var f=new Date-d;b>f?c=setTimeout(e,b-f):(c=null,a())};return function(){d=new Date,c||(c=setTimeout(e,b))}},h=y.clientHeight,i=function(){L=Math.max(a.innerWidth||0,y.clientWidth)!==P.width||y.clientHeight!==h,h=y.clientHeight,L&&s.fillImgs()};Y(a,"resize",g(i,99)),Y(b,"readystatechange",e)}(),s.picturefill=aa,s.fillImgs=aa,s.teardownRun=t,aa._=s,a.picturefillCFG={pf:s,push:function(a){var b=a.shift();"function"==typeof s[b]?s[b].apply(s,a):(A[b]=a[0],R&&s.fillImgs({reselect:!0}))}};for(;I&&I.length;)a.picturefillCFG.push(I.shift());a.picturefill=aa,"object"==typeof module&&"object"==typeof module.exports?module.exports=aa:"function"==typeof define&&define.amd&&define("picturefill",function(){return aa}),s.supPicture||(z["image/webp"]=e("image/webp","data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA=="))}(window,document);




// dskuzm

// check all init
function initCheckAll() {
	jQuery('[data-check-pattern]').checkAll();
}


/*
 * jQuery sticky box plugin 
 */
;(function($, $win) {

	'use strict';

	function StickyScrollBlock($stickyBox, options) {
		this.options = options;
		this.$stickyBox = $stickyBox;
		this.init();
	}

	var StickyScrollBlockPrototype = {
		init: function() {
			this.findElements();
			this.attachEvents();
			this.makeCallback('onInit', this);
		},

		findElements: function() {
			// find parent container in which will be box move 
			this.$container = this.$stickyBox.closest(this.options.container);
			// define box wrap flag
			this.isWrap = this.options.positionType === 'fixed' && this.options.setBoxHeight;
			// define box move flag
			this.moveInContainer = !!this.$container.length;
			// wrapping box to set place in content
			
			//define block to add active class
			this.parentForActive = this.getParentForActive();
			this.isInit = true;
		},

		attachEvents: function() {
			var self = this;

			// bind events
			this.onResize = function() {
				if (!self.isInit) return;
				self.resetState();
				self.recalculateOffsets();
				self.checkStickyPermission();
				self.scrollHandler();
			};

			this.onScroll = function() {
				self.scrollHandler();
			};

			// initial handler call
			this.onResize();

			// handle events
			$win.on('load resize orientationchange', this.onResize)
				.on('scroll', this.onScroll);
		},

		defineExtraTop: function() {
			// define box's extra top dimension
			var extraTop;

			if (typeof this.options.extraTop === 'number') {
				extraTop = this.options.extraTop;
			} else if (typeof this.options.extraTop === 'function') {
				extraTop = this.options.extraTop();
			}

			this.extraTop = this.options.positionType === 'absolute' ?
				extraTop :
				Math.min(this.winParams.height - this.data.boxFullHeight, extraTop);
		},

		checkStickyPermission: function() {
			// check the permission to set sticky
			this.isStickyEnabled = this.moveInContainer ?
				this.data.containerOffsetTop + this.data.containerHeight > this.data.boxFullHeight + this.data.boxOffsetTop + this.options.extraBottom :
				true;
		},

		getParentForActive: function() {
			if (this.isWrap) {
				return this.$stickyBoxWrap;
			}

			if (this.$container.length) {
				return this.$container;
			}

			return this.$stickyBox;
		},

		getWrapClass: function() {
			// get set of container classes
			try {
				return this.$stickyBox.attr('class').split(' ').map(function(name) {
					return 'sticky-wrap-' + name;
				}).join(' ');
			} catch (err) {
				return 'sticky-wrap';
			}
		},

		resetState: function() {
			// reset dimensions and state
			this.stickyFlag = false;
			this.$stickyBox.css({
				'-webkit-transition': '',
				'-webkit-transform': '',
				transition: '',
				transform: '',
				position: '',
				width: '',
				left: '',
				top: ''
			}).removeClass(this.options.activeClass);


			if (this.moveInContainer) {
				this.$container.removeClass(this.options.activeClass);
			}
		},

		recalculateOffsets: function() {
			// define box and container dimensions
			this.winParams = this.getWindowParams();

			this.data = $.extend(
				this.getBoxOffsets(),
				this.getContainerOffsets()
			);

			this.defineExtraTop();
		},

		getBoxOffsets: function() {
			var boxOffset = this.$stickyBox.offset();
			var boxPosition = this.$stickyBox.position();

			return {
				// sticky box offsets
				boxOffsetLeft: boxOffset.left,
				boxOffsetTop: boxOffset.top,
				// sticky box positions
				boxTopPosition: boxPosition.top,
				boxLeftPosition: boxPosition.left,
				// sticky box width/height
				boxFullHeight: this.$stickyBox.outerHeight(true),
				boxHeight: this.$stickyBox.outerHeight(),
				boxWidth: this.$stickyBox.outerWidth()
			};
		},

		getContainerOffsets: function() {
			var containerOffset = this.moveInContainer ? this.$container.offset() : null;

			return containerOffset ? {
				// container offsets
				containerOffsetLeft: containerOffset.left,
				containerOffsetTop: containerOffset.top,
				// container height
				containerHeight: this.$container.outerHeight()
			} : {};
		},

		getWindowParams: function() {
			return {
				height: window.innerHeight || document.documentElement.clientHeight
			};
		},

		makeCallback: function(name) {
			if (typeof this.options[name] === 'function') {
				var args = Array.prototype.slice.call(arguments);
				args.shift();
				this.options[name].apply(this, args);
			}
		},

		destroy: function() {
			this.isInit = false;
			// remove event handlers and styles
			$win.off('load resize orientationchange', this.onResize)
				.off('scroll', this.onScroll);
			this.resetState();
			this.$stickyBox.removeData('StickyScrollBlock');
			if (this.isWrap) {
				this.$stickyBox.unwrap();
			}
			this.makeCallback('onDestroy');
		}
	};

	var stickyMethods = {
		fixed: {
			scrollHandler: function() {
				this.winScrollTop = $win.scrollTop();
				var isActiveSticky = this.winScrollTop -
					(this.options.showAfterScrolled ? this.extraTop : 0) -
					(this.options.showAfterScrolled ? this.data.boxHeight + this.extraTop : 0) >
					this.data.boxOffsetTop - this.extraTop;

				if (isActiveSticky) {
					this.isStickyEnabled && this.stickyOn();
				} else {
					this.stickyOff();
				}
			},

			stickyOn: function() {
				if (!this.stickyFlag) {
					this.stickyFlag = true;
					//this.parentForActive.addClass(this.options.activeClass);
					this.$stickyBox.css({
						width: this.data.boxWidth,
						position: this.options.positionType
					});
					/*if (this.isWrap) {
						this.$stickyBoxWrap.css({
							height: this.data.boxFullHeight
						});
					}*/
					this.makeCallback('fixedOn');
				}
				this.setDynamicPosition();
			},

			stickyOff: function() {
				if (this.stickyFlag) {
					this.stickyFlag = false;
					this.resetState();
					this.makeCallback('fixedOff');
				}
			},

			setDynamicPosition: function() {
				this.$stickyBox.css({
					top: this.getTopPosition(),
					left: this.data.boxOffsetLeft - $win.scrollLeft()
				});
			},

			getTopPosition: function() {
				if (this.moveInContainer) {
					var currScrollTop = this.winScrollTop + this.data.boxHeight + this.options.extraBottom;

					return Math.min(this.extraTop, (this.data.containerHeight + this.data.containerOffsetTop) - currScrollTop);
				} else {
					return this.extraTop;
				}
			}
		},
		absolute: {
			scrollHandler: function() {
				this.winScrollTop = $win.scrollTop();
				var isActiveSticky = this.winScrollTop > this.data.boxOffsetTop - this.extraTop;

				if (isActiveSticky) {
					this.isStickyEnabled && this.stickyOn();
				} else {
					this.stickyOff();
				}
			},

			stickyOn: function() {
				if (!this.stickyFlag) {
					this.stickyFlag = true;
					this.parentForActive.addClass(this.options.activeClass);
					this.$stickyBox.css({
						width: this.data.boxWidth,
						transition: 'transform ' + this.options.animSpeed + 's ease',
						'-webkit-transition': 'transform ' + this.options.animSpeed + 's ease',
					});

					if (this.isWrap) {
						this.$stickyBoxWrap.css({
							height: this.data.boxFullHeight
						});
					}

					this.makeCallback('fixedOn');
				}

				this.clearTimer();
				this.timer = setTimeout(function() {
					this.setDynamicPosition();
				}.bind(this), this.options.animDelay * 1000);
			},

			stickyOff: function() {
				if (this.stickyFlag) {
					this.clearTimer();
					this.stickyFlag = false;

					this.timer = setTimeout(function() {
						this.setDynamicPosition();
						setTimeout(function() {
							this.resetState();
						}.bind(this), this.options.animSpeed * 1000);
					}.bind(this), this.options.animDelay * 1000);
					this.makeCallback('fixedOff');
				}
			},

			clearTimer: function() {
				clearTimeout(this.timer);
			},

			setDynamicPosition: function() {
				var topPosition = Math.max(0, this.getTopPosition());

				this.$stickyBox.css({
					transform: 'translateY(' + topPosition + 'px)',
					'-webkit-transform': 'translateY(' + topPosition + 'px)'
				});
			},

			getTopPosition: function() {
				var currTopPosition = this.winScrollTop - this.data.boxOffsetTop + this.extraTop;

				if (this.moveInContainer) {
					var currScrollTop = this.winScrollTop + this.data.boxHeight + this.options.extraBottom;
					var diffOffset = Math.abs(Math.min(0, (this.data.containerHeight + this.data.containerOffsetTop) - currScrollTop - this.extraTop));

					return currTopPosition - diffOffset;
				} else {
					return currTopPosition;
				}
			}
		}
	};

	// jQuery plugin interface
	$.fn.stickyScrollBlock = function(opt) {
		var args = Array.prototype.slice.call(arguments);
		var method = args[0];

		var options = $.extend({
			container: null,
			positionType: 'fixed', // 'fixed' or 'absolute'
			activeClass: 'fixed-position',
			setBoxHeight: true,
			showAfterScrolled: false,
			extraTop: 0,
			extraBottom: 0,
			animDelay: 0.1,
			animSpeed: 0.2
		}, opt);

		return this.each(function() {
			var $stickyBox = jQuery(this);
			var instance = $stickyBox.data('StickyScrollBlock');

			if (typeof opt === 'object' || typeof opt === 'undefined') {
				StickyScrollBlock.prototype = $.extend(stickyMethods[options.positionType], StickyScrollBlockPrototype);
				$stickyBox.data('StickyScrollBlock', new StickyScrollBlock($stickyBox, options));
			} else if (typeof method === 'string' && instance) {
				if (typeof instance[method] === 'function') {
					args.shift();
					instance[method].apply(instance, args);
				}
			}
		});
	};

	// module exports
	window.StickyScrollBlock = StickyScrollBlock;
}(jQuery, jQuery(window)));

/*
 * jQuery check all plugin
 */
;(function($) {

	'use strict';

	$.fn.checkAll = function(options) {
		return this.each(function() {
			var mainCheckbox = $(this);
			var selector = mainCheckbox.attr('data-check-pattern');
			var onChangeHandler = function(e) {
				var $currentCheckbox = $(e.currentTarget);
				var $subCheckboxes;

				if ($currentCheckbox.is(mainCheckbox)) {
					$subCheckboxes = $(selector);
					$subCheckboxes.prop('checked', mainCheckbox.prop('checked'));
				} else if ($currentCheckbox.is(selector)) {
					$subCheckboxes = $(selector);
					mainCheckbox.prop('checked', $subCheckboxes.filter(':checked').length === $subCheckboxes.length);
				}
			};

			$(document).on('change', 'input[type="checkbox"]', onChangeHandler);
		});
	};
}(jQuery));


// check all init
function initCheckAll() {
	jQuery('[data-check-pattern]').checkAll();
}


/*
 * jQuery ResponsiveBlock plugin
 */
;(function($) {
	function ResponsiveBlock(options) {
		this.options = $.extend({
			position: {
				'..767': '#content',
				'768..1199': '#footer',
				'1200..': '#aside1'
			}
		}, options);
		this.init();
	}
	ResponsiveBlock.prototype = {
		init: function() {
			this.findElements();
		},
		findElements: function() {
			var self = this;
			this.box = $(this.options.holder);
			this.rangeObject = this.options.position;
			this.result = {};
			$.each(this.rangeObject, function(range, block){
				self.result[range] = {
					on: function(){
						self.box.appendTo(block);
					}
				};
			});
			this.addRange(this.result);
		},
		addRange: function(ranges) {
			ResponsiveHelper.addRange(ranges);
		}
	};
	// jquery plugin
	$.fn.responsiveBlock = function(opt){
		return this.each(function(){
			$(this).data('ResponsiveBlock', new ResponsiveBlock($.extend(opt,{holder:this})));
		});
	};
}(jQuery));

/*
 * Responsive Layout helper
 */
ResponsiveHelper = (function($){
	// init variables
	var handlers = [],
		prevWinWidth,
		win = $(window),
		nativeMatchMedia = false;

	// detect match media support
	if(window.matchMedia) {
		if(window.Window && window.matchMedia === Window.prototype.matchMedia) {
			nativeMatchMedia = true;
		} else if(window.matchMedia.toString().indexOf('native') > -1) {
			nativeMatchMedia = true;
		}
	}

	// prepare resize handler
	function resizeHandler() {
		var winWidth = win.width();
		if(winWidth !== prevWinWidth) {
			prevWinWidth = winWidth;

			// loop through range groups
			$.each(handlers, function(index, rangeObject){
				// disable current active area if needed
				$.each(rangeObject.data, function(property, item) {
					if(item.currentActive && !matchRange(item.range[0], item.range[1])) {
						item.currentActive = false;
						if(typeof item.disableCallback === 'function') {
							item.disableCallback();
						}
					}
				});

				// enable areas that match current width
				$.each(rangeObject.data, function(property, item) {
					if(!item.currentActive && matchRange(item.range[0], item.range[1])) {
						// make callback
						item.currentActive = true;
						if(typeof item.enableCallback === 'function') {
							item.enableCallback();
						}
					}
				});
			});
		}
	}
	win.bind('load resize orientationchange', resizeHandler);

	// test range
	function matchRange(r1, r2) {
		var mediaQueryString = '';
		if(r1 > 0) {
			mediaQueryString += '(min-width: ' + r1 + 'px)';
		}
		if(r2 < Infinity) {
			mediaQueryString += (mediaQueryString ? ' and ' : '') + '(max-width: ' + r2 + 'px)';
		}
		return matchQuery(mediaQueryString, r1, r2);
	}

	// media query function
	function matchQuery(query, r1, r2) {
		if(window.matchMedia && nativeMatchMedia) {
			return matchMedia(query).matches;
		} else if(window.styleMedia) {
			return styleMedia.matchMedium(query);
		} else if(window.media) {
			return media.matchMedium(query);
		} else {
			return prevWinWidth >= r1 && prevWinWidth <= r2;
		}
	}

	// range parser
	function parseRange(rangeStr) {
		var rangeData = rangeStr.split('..');
		var x1 = parseInt(rangeData[0], 10) || -Infinity;
		var x2 = parseInt(rangeData[1], 10) || Infinity;
		return [x1, x2].sort(function(a, b){
			return a - b;
		});
	}

	// export public functions
	return {
		addRange: function(ranges) {
			// parse data and add items to collection
			var result = {data:{}};
			$.each(ranges, function(property, data){
				result.data[property] = {
					range: parseRange(property),
					enableCallback: data.on,
					disableCallback: data.off
				};
			});
			handlers.push(result);

			// call resizeHandler to recalculate all events
			prevWinWidth = null;
			resizeHandler();
		}
	};
}(jQuery));
